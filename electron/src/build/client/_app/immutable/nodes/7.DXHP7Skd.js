import{c as Ae,g as Oe,M as ze,a as je,b as Be}from"../chunks/TvSXW-OJ.js";import{a as o,t as k,b as p}from"../chunks/DCngfxLn.js";import{p as Ie,k as w,o as r,a as Re,v as g,y as i,g as t,z as B,A as C,w as v,x as h}from"../chunks/CVfhQmyV.js";import{d as He,s as I}from"../chunks/DnoWaJoF.js";import{a as P,i as $e}from"../chunks/mPLQjtID.js";import{e as Q,I as R,i as W}from"../chunks/CD-IGXGf.js";import{H as Fe,B as E,D as X,T as Y,d as ee,e as fe}from"../chunks/C_ugDeei.js";import{C as te}from"../chunks/LjMNT6vF.js";import{A as ae}from"../chunks/C2ui7u_O.js";import{T as re}from"../chunks/Df8iNtN6.js";import{g as me}from"../chunks/a2mPvBUy.js";const Ge=!1,Je=!1,Ue=async()=>{const y=await(await fetch("/api/categories",{method:"GET"})).json();console.log("CategoryElements",y);const x=Ae(y);return console.log("TreeView",x),{categoriesTreeView:x}},wt=Object.freeze(Object.defineProperty({__proto__:null,load:Ue,prerender:Je,ssr:Ge},Symbol.toStringTag,{value:"Module"}));var Ze=k('<i class="material-icons">arrow_back</i> <span>Zur端ck</span>',1),qe=k('<i class="material-icons">save</i> <span>Speichern</span>',1),Le=(N,y,x)=>{N.key==="Enter"&&r(y,P(t(x)))},Qe=(N,y,x)=>r(y,P(t(x))),We=k('<div role="button" tabindex="0"><div class="label svelte-19c8gnv"> </div> <div class="actions svelte-19c8gnv"><!> <!></div></div>'),Xe=k("<!> Kategorie hinzuf端gen",1),Ye=(N,y,x)=>{N.key==="Enter"&&r(y,P(t(x)))},et=(N,y,x)=>r(y,P(t(x))),tt=k('<div role="button" tabindex="0"><div class="label svelte-19c8gnv"> </div> <div class="actions svelte-19c8gnv"><!> <!></div></div>'),at=k("<!> Element hinzuf端gen",1),rt=k("<!> <!>",1),ot=k('<div class="category-btn svelte-19c8gnv"><div class="label svelte-19c8gnv"> </div> <div class="actions svelte-19c8gnv"><!> <!></div></div>'),st=k("<!> Kriterium hinzuf端gen",1),lt=k("<!> <!>",1),nt=k("<!> <!>",1),it=k("<!> <!> <!>",1),ct=k("<!> <!>",1),dt=k("<!> <!> <!>",1),vt=k("<!> <!>",1),ut=k("<!> <!> <!>",1),_t=k('<section class="svelte-19c8gnv"><div class="categories-header svelte-19c8gnv"><!> <h1>Kategorien</h1> <!></div> <div class="categories-container svelte-19c8gnv"><div class="categories svelte-19c8gnv"><div class="title svelte-19c8gnv">Maschinenelement Kategorien</div> <div><!> <!></div></div> <div class="elements svelte-19c8gnv"><div class="title svelte-19c8gnv">Maschinenelement</div> <div><!></div></div> <div class="criteria svelte-19c8gnv"><div class="title svelte-19c8gnv">Kriterien</div> <div><!></div></div></div></section> <!> <!> <!>',1);function Ct(N,y){Ie(y,!0),Fe.Instance.setTitle("Kategorien");const x=P(y.data.categoriesTreeView);let T=C(null),K=C(null),D=C(!1),H=C(null),S=C(""),A=C(!1),F=C(null),O=C(""),z=C(!1),G=C(null),j=C("");function pe(e,l){l.stopPropagation(),l.preventDefault(),r(H,P(e)),r(S,P(e.name)),r(D,!0)}function ge(e,l){l.stopPropagation(),l.preventDefault(),r(F,P(e)),r(O,P(e.name)),r(A,!0)}function he(e){r(G,P(e)),r(j,P(e.name)),r(z,!0)}function be(e,l){var n;l.stopPropagation(),l.preventDefault(),((n=t(T))==null?void 0:n.id)===x[e].id&&r(T,null),x.splice(e,1)}function Pe(e,l){var n;l.stopPropagation(),l.preventDefault(),((n=t(K))==null?void 0:n.id)===t(T).elements[e].id&&(console.log("clear selected element"),r(K,null)),t(T).elements.splice(e,1)}function ke(e){t(K).criteria.splice(e,1)}function xe(){t(H)?t(H).name=t(S):x.push(new ze({name:t(S),elements:[]})),r(D,!1),r(H,null),r(S,"")}function ye(){t(F)?t(F).name=t(O):t(T).elements.push(new je({name:t(O),criteria:[]})),r(A,!1),r(F,null),r(O,"")}function we(){t(G)?t(G).name=t(j):t(K).criteria.push(new Be({name:t(j)})),r(z,!1),r(G,null),r(j,"")}function Ce(){me("/configuration")}async function Ee(){const e=Oe(x);(await fetch("/api/categories",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok&&me("/configuration")}var oe=_t(),J=w(oe),U=g(J),se=g(U);E(se,{class:"default-button",onclick:()=>Ce(),children:(e,l)=>{var n=Ze();v(2),o(e,n)},$$slots:{default:!0}});var Te=i(se,4);E(Te,{onclick:Ee,children:(e,l)=>{var n=qe();v(2),o(e,n)},$$slots:{default:!0}}),h(U);var le=i(U,2),Z=g(le),ne=i(g(Z),2),ie=g(ne);Q(ie,17,()=>x,W,(e,l,n)=>{var $=We();$.__keydown=[Le,T,l],$.__click=[Qe,T,l];var u=g($),m=g(u,!0);h(u);var s=i(u,2),c=g(s);R(c,{class:"material-icons small-icon-button",onclick:_=>pe(t(l),_),children:(_,b)=>{v();var f=p("edit");o(_,f)},$$slots:{default:!0}});var a=i(c,2);R(a,{class:"material-icons small-icon-button",onclick:_=>be(n,_),children:(_,b)=>{v();var f=p("delete");o(_,f)},$$slots:{default:!0}}),h(s),h($),B(()=>{fe($,`${"category-btn "+(t(T)===t(l)?"selected":"")} svelte-19c8gnv`),I(m,t(l).name)}),o(e,$)});var Ke=i(ie,2);E(Ke,{onclick:()=>r(D,!0),children:(e,l)=>{var n=Xe(),$=w(n);te($,{class:"material-icons",children:(u,m)=>{v();var s=p("add");o(u,s)},$$slots:{default:!0}}),v(),o(e,n)},$$slots:{default:!0}}),h(ne),h(Z);var q=i(Z,2),ce=i(g(q),2),Me=g(ce);{var Ne=e=>{var l=rt(),n=w(l);Q(n,17,()=>t(T).elements,W,(u,m,s)=>{var c=tt();c.__keydown=[Ye,K,m],c.__click=[et,K,m];var a=g(c),_=g(a,!0);h(a);var b=i(a,2),f=g(b);R(f,{class:"material-icons small-icon-button",onclick:d=>ge(t(m),d),children:(d,L)=>{v();var V=p("edit");o(d,V)},$$slots:{default:!0}});var M=i(f,2);R(M,{class:"material-icons small-icon-button",onclick:d=>Pe(s,d),children:(d,L)=>{v();var V=p("delete");o(d,V)},$$slots:{default:!0}}),h(b),h(c),B(()=>{fe(c,`${"category-btn "+(t(K)===t(m)?"selected":"")} svelte-19c8gnv`),I(_,t(m).name)}),o(u,c)});var $=i(n,2);E($,{onclick:()=>r(A,!0),children:(u,m)=>{var s=at(),c=w(s);te(c,{class:"material-icons",children:(a,_)=>{v();var b=p("add");o(a,b)},$$slots:{default:!0}}),v(),o(u,s)},$$slots:{default:!0}}),o(e,l)};$e(Me,e=>{t(T)!=null&&e(Ne)})}h(ce),h(q);var de=i(q,2),ve=i(g(de),2),Ve=g(ve);{var De=e=>{var l=lt(),n=w(l);Q(n,17,()=>t(K).criteria,W,(u,m,s)=>{var c=ot(),a=g(c),_=g(a,!0);h(a);var b=i(a,2),f=g(b);R(f,{class:"material-icons small-icon-button",onclick:()=>he(t(m)),children:(d,L)=>{v();var V=p("edit");o(d,V)},$$slots:{default:!0}});var M=i(f,2);R(M,{class:"material-icons small-icon-button",onclick:()=>ke(s),children:(d,L)=>{v();var V=p("delete");o(d,V)},$$slots:{default:!0}}),h(b),h(c),B(()=>I(_,t(m).name)),o(u,c)});var $=i(n,2);E($,{onclick:()=>r(z,!0),children:(u,m)=>{var s=st(),c=w(s);te(c,{class:"material-icons",children:(a,_)=>{v();var b=p("add");o(a,b)},$$slots:{default:!0}}),v(),o(u,s)},$$slots:{default:!0}}),o(e,l)};$e(Ve,e=>{t(K)!=null&&e(De)})}h(ve),h(de),h(le),h(J);var ue=i(J,2);X(ue,{get open(){return t(D)},set open(e){r(D,P(e))},children:(e,l)=>{var n=it(),$=w(n);Y($,{children:(s,c)=>{v();var a=p();B(()=>I(a,t(H)?"Kategorie bearbeiten":"Neue Kategorie")),o(s,a)},$$slots:{default:!0}});var u=i($,2);ee(u,{children:(s,c)=>{re(s,{label:"Name",get value(){return t(S)},set value(a){r(S,P(a))}})},$$slots:{default:!0}});var m=i(u,2);ae(m,{children:(s,c)=>{var a=nt(),_=w(a);E(_,{onclick:()=>r(D,!1),children:(f,M)=>{v();var d=p("Abbrechen");o(f,d)},$$slots:{default:!0}});var b=i(_,2);E(b,{onclick:()=>xe(),children:(f,M)=>{v();var d=p("Speichern");o(f,d)},$$slots:{default:!0}}),o(s,a)},$$slots:{default:!0}}),o(e,n)},$$slots:{default:!0}});var _e=i(ue,2);X(_e,{get open(){return t(A)},set open(e){r(A,P(e))},children:(e,l)=>{var n=dt(),$=w(n);Y($,{children:(s,c)=>{v();var a=p();B(()=>I(a,t(F)?"Element bearbeiten":"Neues Element")),o(s,a)},$$slots:{default:!0}});var u=i($,2);ee(u,{children:(s,c)=>{re(s,{label:"Name",get value(){return t(O)},set value(a){r(O,P(a))}})},$$slots:{default:!0}});var m=i(u,2);ae(m,{children:(s,c)=>{var a=ct(),_=w(a);E(_,{onclick:()=>r(A,!1),children:(f,M)=>{v();var d=p("Abbrechen");o(f,d)},$$slots:{default:!0}});var b=i(_,2);E(b,{onclick:()=>ye(),children:(f,M)=>{v();var d=p("Speichern");o(f,d)},$$slots:{default:!0}}),o(s,a)},$$slots:{default:!0}}),o(e,n)},$$slots:{default:!0}});var Se=i(_e,2);X(Se,{get open(){return t(z)},set open(e){r(z,P(e))},children:(e,l)=>{var n=ut(),$=w(n);Y($,{children:(s,c)=>{v();var a=p();B(()=>I(a,t(G)?"Kriterium bearbeiten":"Neues Kriterium")),o(s,a)},$$slots:{default:!0}});var u=i($,2);ee(u,{children:(s,c)=>{re(s,{label:"Name",get value(){return t(j)},set value(a){r(j,P(a))}})},$$slots:{default:!0}});var m=i(u,2);ae(m,{children:(s,c)=>{var a=vt(),_=w(a);E(_,{onclick:()=>r(z,!1),children:(f,M)=>{v();var d=p("Abbrechen");o(f,d)},$$slots:{default:!0}});var b=i(_,2);E(b,{onclick:()=>we(),children:(f,M)=>{v();var d=p("Speichern");o(f,d)},$$slots:{default:!0}}),o(s,a)},$$slots:{default:!0}}),o(e,n)},$$slots:{default:!0}}),o(N,oe),Re()}He(["keydown","click"]);export{Ct as component,wt as universal};
