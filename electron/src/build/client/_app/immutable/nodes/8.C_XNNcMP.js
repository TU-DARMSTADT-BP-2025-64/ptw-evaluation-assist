import{P as Qt,e as dr,f as vr,a as Gt,W as hr,b as Mt,c as Tt,A as gr,d as mr}from"../chunks/DT3gzcfM.js";import{R as pr,b as br,g as St}from"../chunks/a2mPvBUy.js";import{c as wr}from"../chunks/TvSXW-OJ.js";import{v as lt}from"../chunks/C6aID195.js";import{c as Ie,a as j,t as ne,b as ge}from"../chunks/DCngfxLn.js";import{p as Ze,k as le,n as qt,a as Xe,A as he,b as ct,g as I,o as q,a7 as _r,v as ae,x as J,y as Q,z as st,h as ce,aN as Vt,w as de}from"../chunks/CVfhQmyV.js";import{e as nt,i as ut,I as We}from"../chunks/CD-IGXGf.js";import{b as ft,s as mt,r as Kt,p as se,a as ue,i as Fe}from"../chunks/mPLQjtID.js";import{C as yr,s as at,g as It,l as bt,a as wt,u as Ar,b as Cr,c as Wt,h as Ur,p as Ft,D as Dt,T as Rt,d as Ot,B as Ke,R as jt,H as xr}from"../chunks/C_ugDeei.js";import{T as Je}from"../chunks/Df8iNtN6.js";import{A as kr}from"../chunks/C2ui7u_O.js";import{d as xt,e as Er,o as Mr,s as _t}from"../chunks/DnoWaJoF.js";import{C as Zt}from"../chunks/LjMNT6vF.js";import{M as Tr,L as Sr,A as Ir,I as ht,S as Fr,O as Pr}from"../chunks/CQAoikBL.js";import{C as $r}from"../chunks/CgwyEeoE.js";import{S as Dr,A as Rr}from"../chunks/UKgtUhsv.js";import"../chunks/C2CtP4Bd.js";function gt(S,m){Ze(m,!0);let C=Kt(m,["$$slots","$$events","$$legacy","children"]),c;function e(){return c.getElement()}return ft(yr(S,mt({_smuiClass:"mdc-deprecated-list-item__text",tag:"span"},()=>C,{children:(t,f)=>{var i=Ie(),h=le(i);at(h,()=>m.children??qt),j(t,i)},$$slots:{default:!0}})),t=>c=t,()=>c),Xe({getElement:e})}function Or(S,m){throw new pr(S,m.toString())}new TextEncoder;const Lr=!1,Hr=!1,Nr=async({params:S})=>{console.log("Load",S,S.id);const m=S.id;if(m==="add")throw Or(303,"/configuration/"+lt());const C=await fetch("/api/product/"+m+"?asTreeView=true",{method:"GET"}),e=await(await fetch("/api/categories",{method:"GET"})).json(),t=wr(e);if(console.log("Response",C),C.status===404){const h=new Qt({id:m});return h.fixStrategies.push({id:lt(),name:"Reuse",priority:0,product:h}),h.fixStrategies.push({id:lt(),name:"Remanufacture",priority:1,product:h}),h.fixStrategies.push({id:lt(),name:"Recycle",priority:2,product:h}),{id:m,productTreeView:h,categoriesTreeView:t}}if(!C.ok)return{status:C.status,error:new Error(C.statusText)};const f=await C.json();console.log("ProductTreeViewElements",f);const i=dr(f);return{id:m,productTreeView:i,categoriesTreeView:t}},ao=Object.freeze(Object.defineProperty({__proto__:null,load:Nr,prerender:Hr,ssr:Lr},Symbol.toStringTag,{value:"Module"}));let Br=0;var Gr=(S,m,C)=>{m()||q(C,!0)},Vr=(S,m)=>{q(m,-1)},Wr=ne('<div><div role="combobox" tabindex="0"><!></div> <!></div>');function $t(S,m){Ze(m,!0);let C=se(m,"use",19,()=>[]),c=se(m,"class",3,""),e=se(m,"options",19,()=>[]),t=se(m,"value",15),f=se(m,"getOptionDisabled",3,()=>!1),i=se(m,"getOptionLabel",3,B=>B==null?"":`${B}`),h=se(m,"text",31,()=>ue(i()(t()))),A=se(m,"disabled",3,!1),o=se(m,"toggle",3,!1),r=se(m,"combobox",3,!1),n=se(m,"clearOnBlur",19,()=>!r()),l=se(m,"selectOnExactMatch",3,!0),g=se(m,"showMenuWithNoInput",3,!0),x=se(m,"noMatchesActionDisabled",3,!0),E=se(m,"search",3,async B=>{const W=B.toLowerCase(),Y=typeof e()=="function"?await e()():e()||[];if(W==="")return Y;const Le=Y.filter(Ye=>i()(Ye).toLowerCase().includes(W));return Le.sort((Ye,pe)=>{const Be=i()(Ye).toLowerCase(),be=i()(pe).toLowerCase();return Be.startsWith(W)&&!be.startsWith(W)?-1:be.startsWith(W)&&!Be.startsWith(W)?1:0}),Le}),p=se(m,"menu$class",3,""),O=se(m,"menu$anchor",3,!1),D=se(m,"menu$anchorCorner",3,"BOTTOM_START"),M=Kt(m,["$$slots","$$events","$$legacy","use","class","options","value","getOptionDisabled","getOptionLabel","text","label","disabled","toggle","combobox","clearOnBlur","selectOnExactMatch","showMenuWithNoInput","noMatchesActionDisabled","search","menu$class","menu$anchor","menu$anchorCorner","children","loading","error","match","noMatches"]),R,b,F=he(0),u=he(!1),s=he(!1),_,y=he(ue([])),v=he(-1),U=he(void 0),w=M.menu$id??"SMUI-autocomplete-"+Br+++"-menu";const T=ce(()=>I(s)&&(h()!==""||g())&&(I(F)>0||!r()&&!(I(y).length===1&&I(y)[0]===t())||r()&&!!I(y).length&&!(I(y).length===1&&I(y)[0]===t())));let d=h();ct(()=>{d!==h()&&(t()!=null&&i()(t())!==h()&&H(t(),!1),I(s)&&(L(),d=h()))});let a=!1;ct(()=>{e()&&!a&&(a=!0,L().then(()=>{a=!1}))});let $=t();ct(()=>{$!==t()?(h(i()(t())),$=t()):r()&&t()!==h()&&(t(h()),$=t())});let k;ct(()=>{if(k!==I(v)){const B=P();I(v)===-1?q(U,void 0):(q(U,ue(B[I(v)])),I(U)&&(I(U).activated=!0,N(I(U).element)||I(U).element.scrollIntoView({block:"end",inline:"nearest"}))),B.forEach((W,Y)=>{Y!==I(v)&&(W.activated=!1)}),_&&_.getOrderedList().forEach(W=>{W.tabindex=-1}),k=I(v)}}),_r("SMUI:list:mount",B=>{_||(_=B)});async function L(){I(s)&&!Z()&&K(),q(F,I(F)+1),q(u,!1);try{const B=await E()(h());if(B!==!1&&(q(y,ue(B)),l())){const W=I(y).find(Y=>i()(Y)===h());W!=null&&i()(t())!==h()&&G(W)}}catch{q(u,!0)}q(F,I(F)-1)}function G(B,W=!0){It(X(),"SMUIAutocompleteSelected",B,{bubbles:!0,cancelable:!0}).defaultPrevented||(W&&h(i()(B)),t(B),W||($=B))}function H(B,W=!0){It(X(),"SMUIAutocompleteDeselected",B,{bubbles:!0,cancelable:!0}).defaultPrevented||(W&&h(""),t(void 0),W||($=void 0))}function V(B){B===t()?H(B):G(B)}function N(B){var W=B.getBoundingClientRect();return W.top>=0&&W.left>=0&&W.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&W.right<=(window.innerWidth||document.documentElement.clientWidth)}function P(){return _?_.getOrderedList().filter(B=>!B.disabled):[]}function z(B){if(!(r()&&!I(y).length)){if(B.key==="ArrowDown")B.preventDefault(),I(v)===-1||I(v)===P().length-1?q(v,0):Vt(v);else if(B.key==="ArrowUp")B.preventDefault(),I(v)===-1||I(v)===0?q(v,P().length-1):Vt(v,-1);else if(B.key==="Enter"){B.preventDefault();const W=P();I(U)&&(W[I(v)]&&W[I(v)].action(B),q(v,-1))}}}async function te(B){var W;if(!document.hasFocus()){Mr(window,"focus",()=>{var Y;(Y=X())!=null&&Y.contains(document.activeElement)||te(B)},{once:!0});return}(W=B.currentTarget)!=null&&W.contains(B.relatedTarget)||(q(v,-1),q(s,!1),n()&&t()==null&&h(""))}function Z(){if(b)return document.activeElement===b.querySelector("input.mdc-text-field__input")}function K(){if(b){const B=b.querySelector("input.mdc-text-field__input");B&&B.focus()}}function ee(){if(b){const B=b.querySelector("input.mdc-text-field__input");B&&B.blur()}}function X(){return R}var re=Wr();const Oe=ce(()=>Ur(M,["menu$","textfield$","list$"]));var ke=B=>{var W;A()||te(B),(W=m.onfocusout)==null||W.call(m,B)};let ie;var oe=ae(re);bt(oe,"aria-controls",w),oe.__focusin=[Gr,A,s],oe.__input=[Vr,v];var ve=ae(oe);{var fe=B=>{var W=Ie(),Y=le(W);at(Y,()=>m.children??qt),j(B,W)},we=B=>{var W=ce(()=>Ft(M,"textfield$"));Je(B,mt({get label(){return m.label},get disabled(){return A()}},()=>I(W),{get value(){return h()},set value(Y){h(Y)}}))};Fe(ve,B=>{m.children?B(fe):B(we,!1)})}J(oe),ft(oe,B=>b=B,()=>b);var Ae=Q(oe,2),me=ce(()=>Wt({[p()]:!0,"smui-autocomplete__menu":!0})),Me=ce(()=>Ft(M,"menu$"));return Tr(Ae,mt({get class(){return I(me)},id:w,managed:!0,neverRestoreFocus:!0,get open(){return I(T)},get anchor(){return O()},get anchorCorner(){return D()}},()=>I(Me),{get anchorElement(){return R},set anchorElement(B){R=B},children:(B,W)=>{var Y=ce(()=>Ft(M,"list$"));Sr(B,mt(()=>I(Y),{children:(Le,Ye)=>{var pe=Ie(),Be=le(pe);{var be=_e=>{ht(_e,{disabled:!0,children:(Pe,Ne)=>{var Ge=Ie(),tt=le(Ge);{var ze=Ve=>{var Ce=Ie(),Ue=le(Ce);at(Ue,()=>m.loading),j(Ve,Ce)},Qe=Ve=>{gt(Ve,{children:(Ce,Ue)=>{de();var Te=ge("Loading...");j(Ce,Te)},$$slots:{default:!0}})};Fe(tt,Ve=>{m.loading?Ve(ze):Ve(Qe,!1)})}j(Pe,Ge)},$$slots:{default:!0}})},He=_e=>{var Pe=Ie(),Ne=le(Pe);{var Ge=ze=>{ht(ze,{disabled:!0,children:(Qe,Ve)=>{var Ce=Ie(),Ue=le(Ce);{var Te=xe=>{var $e=Ie(),et=le($e);at(et,()=>m.error),j(xe,$e)},Se=xe=>{gt(xe,{children:($e,et)=>{de();var ye=ge("Error while fetching suggestions.");j($e,ye)},$$slots:{default:!0}})};Fe(Ue,xe=>{m.error?xe(Te):xe(Se,!1)})}j(Qe,Ce)},$$slots:{default:!0}})},tt=ze=>{var Qe=Ie(),Ve=le(Qe);nt(Ve,17,()=>I(y),ut,(Ce,Ue,Te)=>{var Se=ce(()=>f()(I(Ue))),xe=ce(()=>I(Ue)===t());ht(Ce,{get disabled(){return I(Se)},get selected(){return I(xe)},onmouseenter:()=>{q(v,ue(Te))},onSMUIAction:()=>o()?V(I(Ue)):G(I(Ue)),children:($e,et)=>{var ye=Ie(),De=le(ye);{var dt=ot=>{var vt=Ie(),Nt=le(vt);at(Nt,()=>m.match,()=>I(Ue)),j(ot,vt)},Et=ot=>{gt(ot,{children:(vt,Nt)=>{de();var Bt=ge();st(()=>_t(Bt,i()(I(Ue)))),j(vt,Bt)},$$slots:{default:!0}})};Fe(De,ot=>{m.match?ot(dt):ot(Et,!1)})}j($e,ye)},$$slots:{default:!0}})},Ce=>{ht(Ce,{get disabled(){return x()},onSMUIAction:Ue=>It(X(),"SMUIAutocompleteNoMatchesAction",Ue),children:(Ue,Te)=>{var Se=Ie(),xe=le(Se);{var $e=ye=>{var De=Ie(),dt=le(De);at(dt,()=>m.noMatches),j(ye,De)},et=ye=>{gt(ye,{children:(De,dt)=>{de();var Et=ge("No matches found.");j(De,Et)},$$slots:{default:!0}})};Fe(xe,ye=>{m.noMatches?ye($e):ye(et,!1)})}j(Ue,Se)},$$slots:{default:!0}})}),j(ze,Qe)};Fe(Ne,ze=>{I(u)?ze(Ge):ze(tt,!1)},!0)}j(_e,Pe)};Fe(Be,_e=>{I(F)?_e(be):_e(He,!1)})}j(Le,pe)},$$slots:{default:!0}}))},$$slots:{default:!0}})),J(re),ft(re,B=>R=B,()=>R),wt(re,B=>{var W;return(W=Ir)==null?void 0:W(B)}),wt(re,(B,W)=>{var Y;return(Y=Ar)==null?void 0:Y(B,W)},C),st(()=>{ie=Cr(re,ie,{class:Wt({[c()]:!0,"smui-autocomplete":!0}),...I(Oe),onfocusout:ke}),bt(oe,"aria-expanded",I(T)?"true":"false")}),Er("keydown",oe,z,!0),j(S,re),Xe({focus:K,blur:ee,getElement:X})}xt(["focusin","input"]);function jr(S,m){return m.forEach(function(C){C&&typeof C!="string"&&!Array.isArray(C)&&Object.keys(C).forEach(function(c){if(c!=="default"&&!(c in S)){var e=Object.getOwnPropertyDescriptor(C,c);Object.defineProperty(S,c,e.get?e:{enumerable:!0,get:function(){return C[c]}})}})}),Object.freeze(S)}function Xt(S,m){return new Promise(function(C,c){let e;return zr(S).then(function(t){try{return e=t,C(new Blob([m.slice(0,2),e,m.slice(2)],{type:"image/jpeg"}))}catch(f){return c(f)}},c)})}const zr=S=>new Promise((m,C)=>{const c=new FileReader;c.addEventListener("load",({target:{result:e}})=>{const t=new DataView(e);let f=0;if(t.getUint16(f)!==65496)return C("not a valid JPEG");for(f+=2;;){const i=t.getUint16(f);if(i===65498)break;const h=t.getUint16(f+2);if(i===65505&&t.getUint32(f+4)===1165519206){const A=f+10;let o;switch(t.getUint16(A)){case 18761:o=!0;break;case 19789:o=!1;break;default:return C("TIFF header contains invalid endian")}if(t.getUint16(A+2,o)!==42)return C("TIFF header contains invalid version");const r=t.getUint32(A+4,o),n=A+r+2+12*t.getUint16(A+r,o);for(let l=A+r+2;l<n;l+=12)if(t.getUint16(l,o)==274){if(t.getUint16(l+2,o)!==3)return C("Orientation data type is invalid");if(t.getUint32(l+4,o)!==1)return C("Orientation data count is invalid");t.setUint16(l+8,1,o);break}return m(e.slice(f,f+2+h))}f+=2+h}return m(new Blob)}),c.readAsArrayBuffer(S)});var yt={},Qr={get exports(){return yt},set exports(S){yt=S}};(function(S){var m,C,c={};Qr.exports=c,c.parse=function(e,t){for(var f=c.bin.readUshort,i=c.bin.readUint,h=0,A={},o=new Uint8Array(e),r=o.length-4;i(o,r)!=101010256;)r--;h=r,h+=4;var n=f(o,h+=4);f(o,h+=2);var l=i(o,h+=2),g=i(o,h+=4);h+=4,h=g;for(var x=0;x<n;x++){i(o,h),h+=4,h+=4,h+=4,i(o,h+=4),l=i(o,h+=4);var E=i(o,h+=4),p=f(o,h+=4),O=f(o,h+2),D=f(o,h+4);h+=6;var M=i(o,h+=8);h+=4,h+=p+O+D,c._readLocal(o,M,A,l,E,t)}return A},c._readLocal=function(e,t,f,i,h,A){var o=c.bin.readUshort,r=c.bin.readUint;r(e,t),o(e,t+=4),o(e,t+=2);var n=o(e,t+=2);r(e,t+=2),r(e,t+=4),t+=4;var l=o(e,t+=8),g=o(e,t+=2);t+=2;var x=c.bin.readUTF8(e,t,l);if(t+=l,t+=g,A)f[x]={size:h,csize:i};else{var E=new Uint8Array(e.buffer,t);if(n==0)f[x]=new Uint8Array(E.buffer.slice(t,t+i));else{if(n!=8)throw"unknown compression method: "+n;var p=new Uint8Array(h);c.inflateRaw(E,p),f[x]=p}}},c.inflateRaw=function(e,t){return c.F.inflate(e,t)},c.inflate=function(e,t){return e[0],e[1],c.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-6),t)},c.deflate=function(e,t){t==null&&(t={level:6});var f=0,i=new Uint8Array(50+Math.floor(1.1*e.length));i[f]=120,i[f+1]=156,f+=2,f=c.F.deflateRaw(e,i,f,t.level);var h=c.adler(e,0,e.length);return i[f+0]=h>>>24&255,i[f+1]=h>>>16&255,i[f+2]=h>>>8&255,i[f+3]=h>>>0&255,new Uint8Array(i.buffer,0,f+4)},c.deflateRaw=function(e,t){t==null&&(t={level:6});var f=new Uint8Array(50+Math.floor(1.1*e.length)),i=c.F.deflateRaw(e,f,i,t.level);return new Uint8Array(f.buffer,0,i)},c.encode=function(e,t){t==null&&(t=!1);var f=0,i=c.bin.writeUint,h=c.bin.writeUshort,A={};for(var o in e){var r=!c._noNeed(o)&&!t,n=e[o],l=c.crc.crc(n,0,n.length);A[o]={cpr:r,usize:n.length,crc:l,file:r?c.deflateRaw(n):n}}for(var o in A)f+=A[o].file.length+30+46+2*c.bin.sizeUTF8(o);f+=22;var g=new Uint8Array(f),x=0,E=[];for(var o in A){var p=A[o];E.push(x),x=c._writeHeader(g,x,o,p,0)}var O=0,D=x;for(var o in A)p=A[o],E.push(x),x=c._writeHeader(g,x,o,p,1,E[O++]);var M=x-D;return i(g,x,101010256),x+=4,h(g,x+=4,O),h(g,x+=2,O),i(g,x+=2,M),i(g,x+=4,D),x+=4,x+=2,g.buffer},c._noNeed=function(e){var t=e.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(t)!=-1},c._writeHeader=function(e,t,f,i,h,A){var o=c.bin.writeUint,r=c.bin.writeUshort,n=i.file;return o(e,t,h==0?67324752:33639248),t+=4,h==1&&(t+=2),r(e,t,20),r(e,t+=2,0),r(e,t+=2,i.cpr?8:0),o(e,t+=2,0),o(e,t+=4,i.crc),o(e,t+=4,n.length),o(e,t+=4,i.usize),r(e,t+=4,c.bin.sizeUTF8(f)),r(e,t+=2,0),t+=2,h==1&&(t+=2,t+=2,o(e,t+=6,A),t+=4),t+=c.bin.writeUTF8(e,t,f),h==0&&(e.set(n,t),t+=n.length),t},c.crc={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var f=t,i=0;i<8;i++)1&f?f=3988292384^f>>>1:f>>>=1;e[t]=f}return e}(),update:function(e,t,f,i){for(var h=0;h<i;h++)e=c.crc.table[255&(e^t[f+h])]^e>>>8;return e},crc:function(e,t,f){return 4294967295^c.crc.update(4294967295,e,t,f)}},c.adler=function(e,t,f){for(var i=1,h=0,A=t,o=t+f;A<o;){for(var r=Math.min(A+5552,o);A<r;)h+=i+=e[A++];i%=65521,h%=65521}return h<<16|i},c.bin={readUshort:function(e,t){return e[t]|e[t+1]<<8},writeUshort:function(e,t,f){e[t]=255&f,e[t+1]=f>>8&255},readUint:function(e,t){return 16777216*e[t+3]+(e[t+2]<<16|e[t+1]<<8|e[t])},writeUint:function(e,t,f){e[t]=255&f,e[t+1]=f>>8&255,e[t+2]=f>>16&255,e[t+3]=f>>24&255},readASCII:function(e,t,f){for(var i="",h=0;h<f;h++)i+=String.fromCharCode(e[t+h]);return i},writeASCII:function(e,t,f){for(var i=0;i<f.length;i++)e[t+i]=f.charCodeAt(i)},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,t,f){for(var i,h="",A=0;A<f;A++)h+="%"+c.bin.pad(e[t+A].toString(16));try{i=decodeURIComponent(h)}catch{return c.bin.readASCII(e,t,f)}return i},writeUTF8:function(e,t,f){for(var i=f.length,h=0,A=0;A<i;A++){var o=f.charCodeAt(A);if(!(4294967168&o))e[t+h]=o,h++;else if(!(4294965248&o))e[t+h]=192|o>>6,e[t+h+1]=128|o>>0&63,h+=2;else if(!(4294901760&o))e[t+h]=224|o>>12,e[t+h+1]=128|o>>6&63,e[t+h+2]=128|o>>0&63,h+=3;else{if(4292870144&o)throw"e";e[t+h]=240|o>>18,e[t+h+1]=128|o>>12&63,e[t+h+2]=128|o>>6&63,e[t+h+3]=128|o>>0&63,h+=4}}return h},sizeUTF8:function(e){for(var t=e.length,f=0,i=0;i<t;i++){var h=e.charCodeAt(i);if(!(4294967168&h))f++;else if(!(4294965248&h))f+=2;else if(!(4294901760&h))f+=3;else{if(4292870144&h)throw"e";f+=4}}return f}},c.F={},c.F.deflateRaw=function(e,t,f,i){var h=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][i],A=c.F.U,o=c.F._goodIndex;c.F._hash;var r=c.F._putsE,n=0,l=f<<3,g=0,x=e.length;if(i==0){for(;n<x;)r(t,l,n+(y=Math.min(65535,x-n))==x?1:0),l=c.F._copyExact(e,n,y,t,l+8),n+=y;return l>>>3}var E=A.lits,p=A.strt,O=A.prev,D=0,M=0,R=0,b=0,F=0,u=0;for(x>2&&(p[u=c.F._hash(e,0)]=0),n=0;n<x;n++){if(F=u,n+1<x-2){u=c.F._hash(e,n+1);var s=n+1&32767;O[s]=p[u],p[u]=s}if(g<=n){(D>14e3||M>26697)&&x-n>100&&(g<n&&(E[D]=n-g,D+=2,g=n),l=c.F._writeBlock(n==x-1||g==x?1:0,E,D,b,e,R,n-R,t,l),D=M=b=0,R=n);var _=0;n<x-2&&(_=c.F._bestMatch(e,n,O,F,Math.min(h[2],x-n),h[3]));var y=_>>>16,v=65535&_;if(_!=0){v=65535&_;var U=o(y=_>>>16,A.of0);A.lhst[257+U]++;var w=o(v,A.df0);A.dhst[w]++,b+=A.exb[U]+A.dxb[w],E[D]=y<<23|n-g,E[D+1]=v<<16|U<<8|w,D+=2,g=n+y}else A.lhst[e[n]]++;M++}}for(R==n&&e.length!=0||(g<n&&(E[D]=n-g,D+=2,g=n),l=c.F._writeBlock(1,E,D,b,e,R,n-R,t,l),D=0,M=0,D=M=b=0,R=n);7&l;)l++;return l>>>3},c.F._bestMatch=function(e,t,f,i,h,A){var o=32767&t,r=f[o],n=o-r+32768&32767;if(r==o||i!=c.F._hash(e,t-n))return 0;for(var l=0,g=0,x=Math.min(32767,t);n<=x&&--A!=0&&r!=o;){if(l==0||e[t+l]==e[t+l-n]){var E=c.F._howLong(e,t,n);if(E>l){if(g=n,(l=E)>=h)break;n+2<E&&(E=n+2);for(var p=0,O=0;O<E-2;O++){var D=t-n+O+32768&32767,M=D-f[D]+32768&32767;M>p&&(p=M,r=D)}}}n+=(o=r)-(r=f[o])+32768&32767}return l<<16|g},c.F._howLong=function(e,t,f){if(e[t]!=e[t-f]||e[t+1]!=e[t+1-f]||e[t+2]!=e[t+2-f])return 0;var i=t,h=Math.min(e.length,t+258);for(t+=3;t<h&&e[t]==e[t-f];)t++;return t-i},c.F._hash=function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<4)&65535},c.saved=0,c.F._writeBlock=function(e,t,f,i,h,A,o,r,n){var l,g,x,E,p,O,D,M,R,b=c.F.U,F=c.F._putsF,u=c.F._putsE;b.lhst[256]++,g=(l=c.F.getTrees())[0],x=l[1],E=l[2],p=l[3],O=l[4],D=l[5],M=l[6],R=l[7];var s=32+(n+3&7?8-(n+3&7):0)+(o<<3),_=i+c.F.contSize(b.fltree,b.lhst)+c.F.contSize(b.fdtree,b.dhst),y=i+c.F.contSize(b.ltree,b.lhst)+c.F.contSize(b.dtree,b.dhst);y+=14+3*D+c.F.contSize(b.itree,b.ihst)+(2*b.ihst[16]+3*b.ihst[17]+7*b.ihst[18]);for(var v=0;v<286;v++)b.lhst[v]=0;for(v=0;v<30;v++)b.dhst[v]=0;for(v=0;v<19;v++)b.ihst[v]=0;var U=s<_&&s<y?0:_<y?1:2;if(F(r,n,e),F(r,n+1,U),n+=3,U==0){for(;7&n;)n++;n=c.F._copyExact(h,A,o,r,n)}else{var w,T;if(U==1&&(w=b.fltree,T=b.fdtree),U==2){c.F.makeCodes(b.ltree,g),c.F.revCodes(b.ltree,g),c.F.makeCodes(b.dtree,x),c.F.revCodes(b.dtree,x),c.F.makeCodes(b.itree,E),c.F.revCodes(b.itree,E),w=b.ltree,T=b.dtree,u(r,n,p-257),u(r,n+=5,O-1),u(r,n+=5,D-4),n+=4;for(var d=0;d<D;d++)u(r,n+3*d,b.itree[1+(b.ordr[d]<<1)]);n+=3*D,n=c.F._codeTiny(M,b.itree,r,n),n=c.F._codeTiny(R,b.itree,r,n)}for(var a=A,$=0;$<f;$+=2){for(var k=t[$],L=k>>>23,G=a+(8388607&k);a<G;)n=c.F._writeLit(h[a++],w,r,n);if(L!=0){var H=t[$+1],V=H>>16,N=H>>8&255,P=255&H;u(r,n=c.F._writeLit(257+N,w,r,n),L-b.of0[N]),n+=b.exb[N],F(r,n=c.F._writeLit(P,T,r,n),V-b.df0[P]),n+=b.dxb[P],a+=L}}n=c.F._writeLit(256,w,r,n)}return n},c.F._copyExact=function(e,t,f,i,h){var A=h>>>3;return i[A]=f,i[A+1]=f>>>8,i[A+2]=255-i[A],i[A+3]=255-i[A+1],A+=4,i.set(new Uint8Array(e.buffer,t,f),A),h+(f+4<<3)},c.F.getTrees=function(){for(var e=c.F.U,t=c.F._hufTree(e.lhst,e.ltree,15),f=c.F._hufTree(e.dhst,e.dtree,15),i=[],h=c.F._lenCodes(e.ltree,i),A=[],o=c.F._lenCodes(e.dtree,A),r=0;r<i.length;r+=2)e.ihst[i[r]]++;for(r=0;r<A.length;r+=2)e.ihst[A[r]]++;for(var n=c.F._hufTree(e.ihst,e.itree,7),l=19;l>4&&e.itree[1+(e.ordr[l-1]<<1)]==0;)l--;return[t,f,n,h,o,l,i,A]},c.F.getSecond=function(e){for(var t=[],f=0;f<e.length;f+=2)t.push(e[f+1]);return t},c.F.nonZero=function(e){for(var t="",f=0;f<e.length;f+=2)e[f+1]!=0&&(t+=(f>>1)+",");return t},c.F.contSize=function(e,t){for(var f=0,i=0;i<t.length;i++)f+=t[i]*e[1+(i<<1)];return f},c.F._codeTiny=function(e,t,f,i){for(var h=0;h<e.length;h+=2){var A=e[h],o=e[h+1];i=c.F._writeLit(A,t,f,i);var r=A==16?2:A==17?3:7;A>15&&(c.F._putsE(f,i,o,r),i+=r)}return i},c.F._lenCodes=function(e,t){for(var f=e.length;f!=2&&e[f-1]==0;)f-=2;for(var i=0;i<f;i+=2){var h=e[i+1],A=i+3<f?e[i+3]:-1,o=i+5<f?e[i+5]:-1,r=i==0?-1:e[i-1];if(h==0&&A==h&&o==h){for(var n=i+5;n+2<f&&e[n+2]==h;)n+=2;(l=Math.min(n+1-i>>>1,138))<11?t.push(17,l-3):t.push(18,l-11),i+=2*l-2}else if(h==r&&A==h&&o==h){for(n=i+5;n+2<f&&e[n+2]==h;)n+=2;var l=Math.min(n+1-i>>>1,6);t.push(16,l-3),i+=2*l-2}else t.push(h,0)}return f>>>1},c.F._hufTree=function(e,t,f){var i=[],h=e.length,A=t.length,o=0;for(o=0;o<A;o+=2)t[o]=0,t[o+1]=0;for(o=0;o<h;o++)e[o]!=0&&i.push({lit:o,f:e[o]});var r=i.length,n=i.slice(0);if(r==0)return 0;if(r==1){var l=i[0].lit;return n=l==0?1:0,t[1+(l<<1)]=1,t[1+(n<<1)]=1,1}i.sort(function(M,R){return M.f-R.f});var g=i[0],x=i[1],E=0,p=1,O=2;for(i[0]={lit:-1,f:g.f+x.f,l:g,r:x,d:0};p!=r-1;)g=E!=p&&(O==r||i[E].f<i[O].f)?i[E++]:i[O++],x=E!=p&&(O==r||i[E].f<i[O].f)?i[E++]:i[O++],i[p++]={lit:-1,f:g.f+x.f,l:g,r:x};var D=c.F.setDepth(i[p-1],0);for(D>f&&(c.F.restrictDepth(n,f,D),D=f),o=0;o<r;o++)t[1+(n[o].lit<<1)]=n[o].d;return D},c.F.setDepth=function(e,t){return e.lit!=-1?(e.d=t,t):Math.max(c.F.setDepth(e.l,t+1),c.F.setDepth(e.r,t+1))},c.F.restrictDepth=function(e,t,f){var i=0,h=1<<f-t,A=0;for(e.sort(function(r,n){return n.d==r.d?r.f-n.f:n.d-r.d}),i=0;i<e.length&&e[i].d>t;i++){var o=e[i].d;e[i].d=t,A+=h-(1<<f-o)}for(A>>>=f-t;A>0;)(o=e[i].d)<t?(e[i].d++,A-=1<<t-o-1):i++;for(;i>=0;i--)e[i].d==t&&A<0&&(e[i].d--,A++);A!=0&&console.log("debt left")},c.F._goodIndex=function(e,t){var f=0;return t[16|f]<=e&&(f|=16),t[8|f]<=e&&(f|=8),t[4|f]<=e&&(f|=4),t[2|f]<=e&&(f|=2),t[1|f]<=e&&(f|=1),f},c.F._writeLit=function(e,t,f,i){return c.F._putsF(f,i,t[e<<1]),i+t[1+(e<<1)]},c.F.inflate=function(e,t){var f=Uint8Array;if(e[0]==3&&e[1]==0)return t||new f(0);var i=c.F,h=i._bitsF,A=i._bitsE,o=i._decodeTiny,r=i.makeCodes,n=i.codes2map,l=i._get17,g=i.U,x=t==null;x&&(t=new f(e.length>>>2<<3));for(var E,p,O=0,D=0,M=0,R=0,b=0,F=0,u=0,s=0,_=0;O==0;)if(O=h(e,_,1),D=h(e,_+1,2),_+=3,D!=0){if(x&&(t=c.F._check(t,s+(1<<17))),D==1&&(E=g.flmap,p=g.fdmap,F=511,u=31),D==2){M=A(e,_,5)+257,R=A(e,_+5,5)+1,b=A(e,_+10,4)+4,_+=14;for(var y=0;y<38;y+=2)g.itree[y]=0,g.itree[y+1]=0;var v=1;for(y=0;y<b;y++){var U=A(e,_+3*y,3);g.itree[1+(g.ordr[y]<<1)]=U,U>v&&(v=U)}_+=3*b,r(g.itree,v),n(g.itree,v,g.imap),E=g.lmap,p=g.dmap,_=o(g.imap,(1<<v)-1,M+R,e,_,g.ttree);var w=i._copyOut(g.ttree,0,M,g.ltree);F=(1<<w)-1;var T=i._copyOut(g.ttree,M,R,g.dtree);u=(1<<T)-1,r(g.ltree,w),n(g.ltree,w,E),r(g.dtree,T),n(g.dtree,T,p)}for(;;){var d=E[l(e,_)&F];_+=15&d;var a=d>>>4;if(!(a>>>8))t[s++]=a;else{if(a==256)break;var $=s+a-254;if(a>264){var k=g.ldef[a-257];$=s+(k>>>3)+A(e,_,7&k),_+=7&k}var L=p[l(e,_)&u];_+=15&L;var G=L>>>4,H=g.ddef[G],V=(H>>>4)+h(e,_,15&H);for(_+=15&H,x&&(t=c.F._check(t,s+(1<<17)));s<$;)t[s]=t[s++-V],t[s]=t[s++-V],t[s]=t[s++-V],t[s]=t[s++-V];s=$}}}else{7&_&&(_+=8-(7&_));var N=4+(_>>>3),P=e[N-4]|e[N-3]<<8;x&&(t=c.F._check(t,s+P)),t.set(new f(e.buffer,e.byteOffset+N,P),s),_=N+P<<3,s+=P}return t.length==s?t:t.slice(0,s)},c.F._check=function(e,t){var f=e.length;if(t<=f)return e;var i=new Uint8Array(Math.max(f<<1,t));return i.set(e,0),i},c.F._decodeTiny=function(e,t,f,i,h,A){for(var o=c.F._bitsE,r=c.F._get17,n=0;n<f;){var l=e[r(i,h)&t];h+=15&l;var g=l>>>4;if(g<=15)A[n]=g,n++;else{var x=0,E=0;g==16?(E=3+o(i,h,2),h+=2,x=A[n-1]):g==17?(E=3+o(i,h,3),h+=3):g==18&&(E=11+o(i,h,7),h+=7);for(var p=n+E;n<p;)A[n]=x,n++}}return h},c.F._copyOut=function(e,t,f,i){for(var h=0,A=0,o=i.length>>>1;A<f;){var r=e[A+t];i[A<<1]=0,i[1+(A<<1)]=r,r>h&&(h=r),A++}for(;A<o;)i[A<<1]=0,i[1+(A<<1)]=0,A++;return h},c.F.makeCodes=function(e,t){for(var f,i,h,A,o=c.F.U,r=e.length,n=o.bl_count,l=0;l<=t;l++)n[l]=0;for(l=1;l<r;l+=2)n[e[l]]++;var g=o.next_code;for(f=0,n[0]=0,i=1;i<=t;i++)f=f+n[i-1]<<1,g[i]=f;for(h=0;h<r;h+=2)(A=e[h+1])!=0&&(e[h]=g[A],g[A]++)},c.F.codes2map=function(e,t,f){for(var i=e.length,h=c.F.U.rev15,A=0;A<i;A+=2)if(e[A+1]!=0)for(var o=A>>1,r=e[A+1],n=o<<4|r,l=t-r,g=e[A]<<l,x=g+(1<<l);g!=x;)f[h[g]>>>15-t]=n,g++},c.F.revCodes=function(e,t){for(var f=c.F.U.rev15,i=15-t,h=0;h<e.length;h+=2){var A=e[h]<<t-e[h+1];e[h]=f[A]>>>i}},c.F._putsE=function(e,t,f){f<<=7&t;var i=t>>>3;e[i]|=f,e[i+1]|=f>>>8},c.F._putsF=function(e,t,f){f<<=7&t;var i=t>>>3;e[i]|=f,e[i+1]|=f>>>8,e[i+2]|=f>>>16},c.F._bitsE=function(e,t,f){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<f)-1},c.F._bitsF=function(e,t,f){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<f)-1},c.F._get17=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},c.F._get25=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},c.F.U=(m=Uint16Array,C=Uint32Array,{next_code:new m(16),bl_count:new m(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new m(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new C(32),flmap:new m(512),fltree:[],fdmap:new m(32),fdtree:[],lmap:new m(32768),ltree:[],ttree:[],dmap:new m(32768),dtree:[],imap:new m(512),itree:[],rev15:new m(32768),lhst:new C(286),dhst:new C(30),ihst:new C(19),lits:new C(15e3),strt:new m(65536),prev:new m(32768)}),function(){for(var e=c.F.U,t=0;t<32768;t++){var f=t;f=(4278255360&(f=(4042322160&(f=(3435973836&(f=(2863311530&f)>>>1|(1431655765&f)<<1))>>>2|(858993459&f)<<2))>>>4|(252645135&f)<<4))>>>8|(16711935&f)<<8,e.rev15[t]=(f>>>16|f<<16)>>>17}function i(h,A,o){for(;A--!=0;)h.push(0,o)}for(t=0;t<32;t++)e.ldef[t]=e.of0[t]<<3|e.exb[t],e.ddef[t]=e.df0[t]<<4|e.dxb[t];i(e.fltree,144,8),i(e.fltree,112,9),i(e.fltree,24,7),i(e.fltree,8,8),c.F.makeCodes(e.fltree,9),c.F.codes2map(e.fltree,9,e.flmap),c.F.revCodes(e.fltree,9),i(e.fdtree,32,5),c.F.makeCodes(e.fdtree,5),c.F.codes2map(e.fdtree,5,e.fdmap),c.F.revCodes(e.fdtree,5),i(e.itree,19,0),i(e.ltree,286,0),i(e.dtree,30,0),i(e.ttree,320,0)}()})();var qr=jr({__proto__:null,default:yt},[yt]);const je=function(){var S={nextZero(o,r){for(;o[r]!=0;)r++;return r},readUshort:(o,r)=>o[r]<<8|o[r+1],writeUshort(o,r,n){o[r]=n>>8&255,o[r+1]=255&n},readUint:(o,r)=>16777216*o[r]+(o[r+1]<<16|o[r+2]<<8|o[r+3]),writeUint(o,r,n){o[r]=n>>24&255,o[r+1]=n>>16&255,o[r+2]=n>>8&255,o[r+3]=255&n},readASCII(o,r,n){let l="";for(let g=0;g<n;g++)l+=String.fromCharCode(o[r+g]);return l},writeASCII(o,r,n){for(let l=0;l<n.length;l++)o[r+l]=n.charCodeAt(l)},readBytes(o,r,n){const l=[];for(let g=0;g<n;g++)l.push(o[r+g]);return l},pad:o=>o.length<2?`0${o}`:o,readUTF8(o,r,n){let l,g="";for(let x=0;x<n;x++)g+=`%${S.pad(o[r+x].toString(16))}`;try{l=decodeURIComponent(g)}catch{return S.readASCII(o,r,n)}return l}};function m(o,r,n,l){const g=r*n,x=t(l),E=Math.ceil(r*x/8),p=new Uint8Array(4*g),O=new Uint32Array(p.buffer),{ctype:D}=l,{depth:M}=l,R=S.readUshort;if(D==6){const k=g<<2;if(M==8)for(var b=0;b<k;b+=4)p[b]=o[b],p[b+1]=o[b+1],p[b+2]=o[b+2],p[b+3]=o[b+3];if(M==16)for(b=0;b<k;b++)p[b]=o[b<<1]}else if(D==2){const k=l.tabs.tRNS;if(k==null){if(M==8)for(b=0;b<g;b++){var F=3*b;O[b]=255<<24|o[F+2]<<16|o[F+1]<<8|o[F]}if(M==16)for(b=0;b<g;b++)F=6*b,O[b]=255<<24|o[F+4]<<16|o[F+2]<<8|o[F]}else{var u=k[0];const L=k[1],G=k[2];if(M==8)for(b=0;b<g;b++){var s=b<<2;F=3*b,O[b]=255<<24|o[F+2]<<16|o[F+1]<<8|o[F],o[F]==u&&o[F+1]==L&&o[F+2]==G&&(p[s+3]=0)}if(M==16)for(b=0;b<g;b++)s=b<<2,F=6*b,O[b]=255<<24|o[F+4]<<16|o[F+2]<<8|o[F],R(o,F)==u&&R(o,F+2)==L&&R(o,F+4)==G&&(p[s+3]=0)}}else if(D==3){const k=l.tabs.PLTE,L=l.tabs.tRNS,G=L?L.length:0;if(M==1)for(var _=0;_<n;_++){var y=_*E,v=_*r;for(b=0;b<r;b++){s=v+b<<2;var U=3*(w=o[y+(b>>3)]>>7-((7&b)<<0)&1);p[s]=k[U],p[s+1]=k[U+1],p[s+2]=k[U+2],p[s+3]=w<G?L[w]:255}}if(M==2)for(_=0;_<n;_++)for(y=_*E,v=_*r,b=0;b<r;b++)s=v+b<<2,U=3*(w=o[y+(b>>2)]>>6-((3&b)<<1)&3),p[s]=k[U],p[s+1]=k[U+1],p[s+2]=k[U+2],p[s+3]=w<G?L[w]:255;if(M==4)for(_=0;_<n;_++)for(y=_*E,v=_*r,b=0;b<r;b++)s=v+b<<2,U=3*(w=o[y+(b>>1)]>>4-((1&b)<<2)&15),p[s]=k[U],p[s+1]=k[U+1],p[s+2]=k[U+2],p[s+3]=w<G?L[w]:255;if(M==8)for(b=0;b<g;b++){var w;s=b<<2,U=3*(w=o[b]),p[s]=k[U],p[s+1]=k[U+1],p[s+2]=k[U+2],p[s+3]=w<G?L[w]:255}}else if(D==4){if(M==8)for(b=0;b<g;b++){s=b<<2;var T=o[d=b<<1];p[s]=T,p[s+1]=T,p[s+2]=T,p[s+3]=o[d+1]}if(M==16)for(b=0;b<g;b++){var d;s=b<<2,T=o[d=b<<2],p[s]=T,p[s+1]=T,p[s+2]=T,p[s+3]=o[d+2]}}else if(D==0)for(u=l.tabs.tRNS?l.tabs.tRNS:-1,_=0;_<n;_++){const k=_*E,L=_*r;if(M==1)for(var a=0;a<r;a++){var $=(T=255*(o[k+(a>>>3)]>>>7-(7&a)&1))==255*u?0:255;O[L+a]=$<<24|T<<16|T<<8|T}else if(M==2)for(a=0;a<r;a++)$=(T=85*(o[k+(a>>>2)]>>>6-((3&a)<<1)&3))==85*u?0:255,O[L+a]=$<<24|T<<16|T<<8|T;else if(M==4)for(a=0;a<r;a++)$=(T=17*(o[k+(a>>>1)]>>>4-((1&a)<<2)&15))==17*u?0:255,O[L+a]=$<<24|T<<16|T<<8|T;else if(M==8)for(a=0;a<r;a++)$=(T=o[k+a])==u?0:255,O[L+a]=$<<24|T<<16|T<<8|T;else if(M==16)for(a=0;a<r;a++)T=o[k+(a<<1)],$=R(o,k+(a<<1))==u?0:255,O[L+a]=$<<24|T<<16|T<<8|T}return p}function C(o,r,n,l){const g=t(o),x=Math.ceil(n*g/8),E=new Uint8Array((x+1+o.interlace)*l);return r=o.tabs.CgBI?e(r,E):c(r,E),o.interlace==0?r=f(r,o,0,n,l):o.interlace==1&&(r=function(O,D){const M=D.width,R=D.height,b=t(D),F=b>>3,u=Math.ceil(M*b/8),s=new Uint8Array(R*u);let _=0;const y=[0,0,4,0,2,0,1],v=[0,4,0,2,0,1,0],U=[8,8,8,4,4,2,2],w=[8,8,4,4,2,2,1];let T=0;for(;T<7;){const a=U[T],$=w[T];let k=0,L=0,G=y[T];for(;G<R;)G+=a,L++;let H=v[T];for(;H<M;)H+=$,k++;const V=Math.ceil(k*b/8);f(O,D,_,k,L);let N=0,P=y[T];for(;P<R;){let z=v[T],te=_+N*V<<3;for(;z<M;){var d;if(b==1&&(d=(d=O[te>>3])>>7-(7&te)&1,s[P*u+(z>>3)]|=d<<7-((7&z)<<0)),b==2&&(d=(d=O[te>>3])>>6-(7&te)&3,s[P*u+(z>>2)]|=d<<6-((3&z)<<1)),b==4&&(d=(d=O[te>>3])>>4-(7&te)&15,s[P*u+(z>>1)]|=d<<4-((1&z)<<2)),b>=8){const Z=P*u+z*F;for(let K=0;K<F;K++)s[Z+K]=O[(te>>3)+K]}te+=b,z+=$}N++,P+=a}k*L!=0&&(_+=L*(1+V)),T+=1}return s}(r,o)),r}function c(o,r){return e(new Uint8Array(o.buffer,2,o.length-6),r)}var e=function(){const o={H:{}};return o.H.N=function(r,n){const l=Uint8Array;let g,x,E=0,p=0,O=0,D=0,M=0,R=0,b=0,F=0,u=0;if(r[0]==3&&r[1]==0)return n||new l(0);const s=o.H,_=s.b,y=s.e,v=s.R,U=s.n,w=s.A,T=s.Z,d=s.m,a=n==null;for(a&&(n=new l(r.length>>>2<<5));E==0;)if(E=_(r,u,1),p=_(r,u+1,2),u+=3,p!=0){if(a&&(n=o.H.W(n,F+(1<<17))),p==1&&(g=d.J,x=d.h,R=511,b=31),p==2){O=y(r,u,5)+257,D=y(r,u+5,5)+1,M=y(r,u+10,4)+4,u+=14;let k=1;for(var $=0;$<38;$+=2)d.Q[$]=0,d.Q[$+1]=0;for($=0;$<M;$++){const H=y(r,u+3*$,3);d.Q[1+(d.X[$]<<1)]=H,H>k&&(k=H)}u+=3*M,U(d.Q,k),w(d.Q,k,d.u),g=d.w,x=d.d,u=v(d.u,(1<<k)-1,O+D,r,u,d.v);const L=s.V(d.v,0,O,d.C);R=(1<<L)-1;const G=s.V(d.v,O,D,d.D);b=(1<<G)-1,U(d.C,L),w(d.C,L,g),U(d.D,G),w(d.D,G,x)}for(;;){const k=g[T(r,u)&R];u+=15&k;const L=k>>>4;if(!(L>>>8))n[F++]=L;else{if(L==256)break;{let G=F+L-254;if(L>264){const z=d.q[L-257];G=F+(z>>>3)+y(r,u,7&z),u+=7&z}const H=x[T(r,u)&b];u+=15&H;const V=H>>>4,N=d.c[V],P=(N>>>4)+_(r,u,15&N);for(u+=15&N;F<G;)n[F]=n[F++-P],n[F]=n[F++-P],n[F]=n[F++-P],n[F]=n[F++-P];F=G}}}}else{7&u&&(u+=8-(7&u));const k=4+(u>>>3),L=r[k-4]|r[k-3]<<8;a&&(n=o.H.W(n,F+L)),n.set(new l(r.buffer,r.byteOffset+k,L),F),u=k+L<<3,F+=L}return n.length==F?n:n.slice(0,F)},o.H.W=function(r,n){const l=r.length;if(n<=l)return r;const g=new Uint8Array(l<<1);return g.set(r,0),g},o.H.R=function(r,n,l,g,x,E){const p=o.H.e,O=o.H.Z;let D=0;for(;D<l;){const M=r[O(g,x)&n];x+=15&M;const R=M>>>4;if(R<=15)E[D]=R,D++;else{let b=0,F=0;R==16?(F=3+p(g,x,2),x+=2,b=E[D-1]):R==17?(F=3+p(g,x,3),x+=3):R==18&&(F=11+p(g,x,7),x+=7);const u=D+F;for(;D<u;)E[D]=b,D++}}return x},o.H.V=function(r,n,l,g){let x=0,E=0;const p=g.length>>>1;for(;E<l;){const O=r[E+n];g[E<<1]=0,g[1+(E<<1)]=O,O>x&&(x=O),E++}for(;E<p;)g[E<<1]=0,g[1+(E<<1)]=0,E++;return x},o.H.n=function(r,n){const l=o.H.m,g=r.length;let x,E,p,O;const D=l.j;for(var M=0;M<=n;M++)D[M]=0;for(M=1;M<g;M+=2)D[r[M]]++;const R=l.K;for(x=0,D[0]=0,E=1;E<=n;E++)x=x+D[E-1]<<1,R[E]=x;for(p=0;p<g;p+=2)O=r[p+1],O!=0&&(r[p]=R[O],R[O]++)},o.H.A=function(r,n,l){const g=r.length,x=o.H.m.r;for(let E=0;E<g;E+=2)if(r[E+1]!=0){const p=E>>1,O=r[E+1],D=p<<4|O,M=n-O;let R=r[E]<<M;const b=R+(1<<M);for(;R!=b;)l[x[R]>>>15-n]=D,R++}},o.H.l=function(r,n){const l=o.H.m.r,g=15-n;for(let x=0;x<r.length;x+=2){const E=r[x]<<n-r[x+1];r[x]=l[E]>>>g}},o.H.M=function(r,n,l){l<<=7&n;const g=n>>>3;r[g]|=l,r[g+1]|=l>>>8},o.H.I=function(r,n,l){l<<=7&n;const g=n>>>3;r[g]|=l,r[g+1]|=l>>>8,r[g+2]|=l>>>16},o.H.e=function(r,n,l){return(r[n>>>3]|r[1+(n>>>3)]<<8)>>>(7&n)&(1<<l)-1},o.H.b=function(r,n,l){return(r[n>>>3]|r[1+(n>>>3)]<<8|r[2+(n>>>3)]<<16)>>>(7&n)&(1<<l)-1},o.H.Z=function(r,n){return(r[n>>>3]|r[1+(n>>>3)]<<8|r[2+(n>>>3)]<<16)>>>(7&n)},o.H.i=function(r,n){return(r[n>>>3]|r[1+(n>>>3)]<<8|r[2+(n>>>3)]<<16|r[3+(n>>>3)]<<24)>>>(7&n)},o.H.m=function(){const r=Uint16Array,n=Uint32Array;return{K:new r(16),j:new r(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new r(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new n(32),J:new r(512),_:[],h:new r(32),$:[],w:new r(32768),C:[],v:[],d:new r(32768),D:[],u:new r(512),Q:[],r:new r(32768),s:new n(286),Y:new n(30),a:new n(19),t:new n(15e3),k:new r(65536),g:new r(32768)}}(),function(){const r=o.H.m;for(var n=0;n<32768;n++){let g=n;g=(2863311530&g)>>>1|(1431655765&g)<<1,g=(3435973836&g)>>>2|(858993459&g)<<2,g=(4042322160&g)>>>4|(252645135&g)<<4,g=(4278255360&g)>>>8|(16711935&g)<<8,r.r[n]=(g>>>16|g<<16)>>>17}function l(g,x,E){for(;x--!=0;)g.push(0,E)}for(n=0;n<32;n++)r.q[n]=r.S[n]<<3|r.T[n],r.c[n]=r.p[n]<<4|r.z[n];l(r._,144,8),l(r._,112,9),l(r._,24,7),l(r._,8,8),o.H.n(r._,9),o.H.A(r._,9,r.J),o.H.l(r._,9),l(r.$,32,5),o.H.n(r.$,5),o.H.A(r.$,5,r.h),o.H.l(r.$,5),l(r.Q,19,0),l(r.C,286,0),l(r.D,30,0),l(r.v,320,0)}(),o.H.N}();function t(o){return[1,null,3,1,2,null,4][o.ctype]*o.depth}function f(o,r,n,l,g){let x=t(r);const E=Math.ceil(l*x/8);let p,O;x=Math.ceil(x/8);let D=o[n],M=0;if(D>1&&(o[n]=[0,0,1][D-2]),D==3)for(M=x;M<E;M++)o[M+1]=o[M+1]+(o[M+1-x]>>>1)&255;for(let R=0;R<g;R++)if(p=n+R*E,O=p+R+1,D=o[O-1],M=0,D==0)for(;M<E;M++)o[p+M]=o[O+M];else if(D==1){for(;M<x;M++)o[p+M]=o[O+M];for(;M<E;M++)o[p+M]=o[O+M]+o[p+M-x]}else if(D==2)for(;M<E;M++)o[p+M]=o[O+M]+o[p+M-E];else if(D==3){for(;M<x;M++)o[p+M]=o[O+M]+(o[p+M-E]>>>1);for(;M<E;M++)o[p+M]=o[O+M]+(o[p+M-E]+o[p+M-x]>>>1)}else{for(;M<x;M++)o[p+M]=o[O+M]+i(0,o[p+M-E],0);for(;M<E;M++)o[p+M]=o[O+M]+i(o[p+M-x],o[p+M-E],o[p+M-x-E])}return o}function i(o,r,n){const l=o+r-n,g=l-o,x=l-r,E=l-n;return g*g<=x*x&&g*g<=E*E?o:x*x<=E*E?r:n}function h(o,r,n){n.width=S.readUint(o,r),r+=4,n.height=S.readUint(o,r),r+=4,n.depth=o[r],r++,n.ctype=o[r],r++,n.compress=o[r],r++,n.filter=o[r],r++,n.interlace=o[r],r++}function A(o,r,n,l,g,x,E,p,O){const D=Math.min(r,g),M=Math.min(n,x);let R=0,b=0;for(let T=0;T<M;T++)for(let d=0;d<D;d++)if(E>=0&&p>=0?(R=T*r+d<<2,b=(p+T)*g+E+d<<2):(R=(-p+T)*r-E+d<<2,b=T*g+d<<2),O==0)l[b]=o[R],l[b+1]=o[R+1],l[b+2]=o[R+2],l[b+3]=o[R+3];else if(O==1){var F=o[R+3]*.00392156862745098,u=o[R]*F,s=o[R+1]*F,_=o[R+2]*F,y=l[b+3]*(1/255),v=l[b]*y,U=l[b+1]*y,w=l[b+2]*y;const a=1-F,$=F+y*a,k=$==0?0:1/$;l[b+3]=255*$,l[b+0]=(u+v*a)*k,l[b+1]=(s+U*a)*k,l[b+2]=(_+w*a)*k}else if(O==2)F=o[R+3],u=o[R],s=o[R+1],_=o[R+2],y=l[b+3],v=l[b],U=l[b+1],w=l[b+2],F==y&&u==v&&s==U&&_==w?(l[b]=0,l[b+1]=0,l[b+2]=0,l[b+3]=0):(l[b]=u,l[b+1]=s,l[b+2]=_,l[b+3]=F);else if(O==3){if(F=o[R+3],u=o[R],s=o[R+1],_=o[R+2],y=l[b+3],v=l[b],U=l[b+1],w=l[b+2],F==y&&u==v&&s==U&&_==w)continue;if(F<220&&y>20)return!1}return!0}return{decode:function(r){const n=new Uint8Array(r);let l=8;const g=S,x=g.readUshort,E=g.readUint,p={tabs:{},frames:[]},O=new Uint8Array(n.length);let D,M=0,R=0;const b=[137,80,78,71,13,10,26,10];for(var F=0;F<8;F++)if(n[F]!=b[F])throw"The input is not a PNG file!";for(;l<n.length;){const T=g.readUint(n,l);l+=4;const d=g.readASCII(n,l,4);if(l+=4,d=="IHDR")h(n,l,p);else if(d=="iCCP"){for(var u=l;n[u]!=0;)u++;g.readASCII(n,l,u-l),n[u+1];const a=n.slice(u+2,l+T);let $=null;try{$=c(a)}catch{$=e(a)}p.tabs[d]=$}else if(d=="CgBI")p.tabs[d]=n.slice(l,l+4);else if(d=="IDAT"){for(F=0;F<T;F++)O[M+F]=n[l+F];M+=T}else if(d=="acTL")p.tabs[d]={num_frames:E(n,l),num_plays:E(n,l+4)},D=new Uint8Array(n.length);else if(d=="fcTL"){R!=0&&((w=p.frames[p.frames.length-1]).data=C(p,D.slice(0,R),w.rect.width,w.rect.height),R=0);const a={x:E(n,l+12),y:E(n,l+16),width:E(n,l+4),height:E(n,l+8)};let $=x(n,l+22);$=x(n,l+20)/($==0?100:$);const k={rect:a,delay:Math.round(1e3*$),dispose:n[l+24],blend:n[l+25]};p.frames.push(k)}else if(d=="fdAT"){for(F=0;F<T-4;F++)D[R+F]=n[l+F+4];R+=T-4}else if(d=="pHYs")p.tabs[d]=[g.readUint(n,l),g.readUint(n,l+4),n[l+8]];else if(d=="cHRM")for(p.tabs[d]=[],F=0;F<8;F++)p.tabs[d].push(g.readUint(n,l+4*F));else if(d=="tEXt"||d=="zTXt"){p.tabs[d]==null&&(p.tabs[d]={});var s=g.nextZero(n,l),_=g.readASCII(n,l,s-l),y=l+T-s-1;if(d=="tEXt")U=g.readASCII(n,s+1,y);else{var v=c(n.slice(s+2,s+2+y));U=g.readUTF8(v,0,v.length)}p.tabs[d][_]=U}else if(d=="iTXt"){p.tabs[d]==null&&(p.tabs[d]={}),s=0,u=l,s=g.nextZero(n,u),_=g.readASCII(n,u,s-u);const a=n[u=s+1];var U;n[u+1],u+=2,s=g.nextZero(n,u),g.readASCII(n,u,s-u),u=s+1,s=g.nextZero(n,u),g.readUTF8(n,u,s-u),y=T-((u=s+1)-l),a==0?U=g.readUTF8(n,u,y):(v=c(n.slice(u,u+y)),U=g.readUTF8(v,0,v.length)),p.tabs[d][_]=U}else if(d=="PLTE")p.tabs[d]=g.readBytes(n,l,T);else if(d=="hIST"){const a=p.tabs.PLTE.length/3;for(p.tabs[d]=[],F=0;F<a;F++)p.tabs[d].push(x(n,l+2*F))}else if(d=="tRNS")p.ctype==3?p.tabs[d]=g.readBytes(n,l,T):p.ctype==0?p.tabs[d]=x(n,l):p.ctype==2&&(p.tabs[d]=[x(n,l),x(n,l+2),x(n,l+4)]);else if(d=="gAMA")p.tabs[d]=g.readUint(n,l)/1e5;else if(d=="sRGB")p.tabs[d]=n[l];else if(d=="bKGD")p.ctype==0||p.ctype==4?p.tabs[d]=[x(n,l)]:p.ctype==2||p.ctype==6?p.tabs[d]=[x(n,l),x(n,l+2),x(n,l+4)]:p.ctype==3&&(p.tabs[d]=n[l]);else if(d=="IEND")break;l+=T,g.readUint(n,l),l+=4}var w;return R!=0&&((w=p.frames[p.frames.length-1]).data=C(p,D.slice(0,R),w.rect.width,w.rect.height)),p.data=C(p,O,p.width,p.height),delete p.compress,delete p.interlace,delete p.filter,p},toRGBA8:function(r){const n=r.width,l=r.height;if(r.tabs.acTL==null)return[m(r.data,n,l,r).buffer];const g=[];r.frames[0].data==null&&(r.frames[0].data=r.data);const x=n*l*4,E=new Uint8Array(x),p=new Uint8Array(x),O=new Uint8Array(x);for(let M=0;M<r.frames.length;M++){const R=r.frames[M],b=R.rect.x,F=R.rect.y,u=R.rect.width,s=R.rect.height,_=m(R.data,u,s,r);if(M!=0)for(var D=0;D<x;D++)O[D]=E[D];if(R.blend==0?A(_,u,s,E,n,l,b,F,0):R.blend==1&&A(_,u,s,E,n,l,b,F,1),g.push(E.buffer.slice(0)),R.dispose!=0){if(R.dispose==1)A(p,u,s,E,n,l,b,F,0);else if(R.dispose==2)for(D=0;D<x;D++)E[D]=O[D]}}return g},_paeth:i,_copyTile:A,_bin:S}}();(function(){const{_copyTile:S}=je,{_bin:m}=je,C=je._paeth;var c={table:function(){const u=new Uint32Array(256);for(let s=0;s<256;s++){let _=s;for(let y=0;y<8;y++)1&_?_=3988292384^_>>>1:_>>>=1;u[s]=_}return u}(),update(u,s,_,y){for(let v=0;v<y;v++)u=c.table[255&(u^s[_+v])]^u>>>8;return u},crc:(u,s,_)=>4294967295^c.update(4294967295,u,s,_)};function e(u,s,_,y){s[_]+=u[0]*y>>4,s[_+1]+=u[1]*y>>4,s[_+2]+=u[2]*y>>4,s[_+3]+=u[3]*y>>4}function t(u){return Math.max(0,Math.min(255,u))}function f(u,s){const _=u[0]-s[0],y=u[1]-s[1],v=u[2]-s[2],U=u[3]-s[3];return _*_+y*y+v*v+U*U}function i(u,s,_,y,v,U,w){w==null&&(w=1);const T=y.length,d=[];for(var a=0;a<T;a++){const P=y[a];d.push([P>>>0&255,P>>>8&255,P>>>16&255,P>>>24&255])}for(a=0;a<T;a++){let P=4294967295;for(var $=0,k=0;k<T;k++){var L=f(d[a],d[k]);k!=a&&L<P&&(P=L,$=k)}}const G=new Uint32Array(v.buffer),H=new Int16Array(s*_*4),V=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(a=0;a<V.length;a++)V[a]=255*((V[a]+.5)/16-.5);for(let P=0;P<_;P++)for(let z=0;z<s;z++){var N;a=4*(P*s+z),w!=2?N=[t(u[a]+H[a]),t(u[a+1]+H[a+1]),t(u[a+2]+H[a+2]),t(u[a+3]+H[a+3])]:(L=V[4*(3&P)+(3&z)],N=[t(u[a]+L),t(u[a+1]+L),t(u[a+2]+L),t(u[a+3]+L)]),$=0;let te=16777215;for(k=0;k<T;k++){const ee=f(N,d[k]);ee<te&&(te=ee,$=k)}const Z=d[$],K=[N[0]-Z[0],N[1]-Z[1],N[2]-Z[2],N[3]-Z[3]];w==1&&(z!=s-1&&e(K,H,a+4,7),P!=_-1&&(z!=0&&e(K,H,a+4*s-4,3),e(K,H,a+4*s,5),z!=s-1&&e(K,H,a+4*s+4,1))),U[a>>2]=$,G[a>>2]=y[$]}}function h(u,s,_,y,v){v==null&&(v={});const{crc:U}=c,w=m.writeUint,T=m.writeUshort,d=m.writeASCII;let a=8;const $=u.frames.length>1;let k,L=!1,G=33+($?20:0);if(v.sRGB!=null&&(G+=13),v.pHYs!=null&&(G+=21),v.iCCP!=null&&(k=pako.deflate(v.iCCP),G+=21+k.length+4),u.ctype==3){for(var H=u.plte.length,V=0;V<H;V++)u.plte[V]>>>24!=255&&(L=!0);G+=8+3*H+4+(L?8+1*H+4:0)}for(var N=0;N<u.frames.length;N++)$&&(G+=38),G+=(Z=u.frames[N]).cimg.length+12,N!=0&&(G+=4);G+=12;const P=new Uint8Array(G),z=[137,80,78,71,13,10,26,10];for(V=0;V<8;V++)P[V]=z[V];if(w(P,a,13),a+=4,d(P,a,"IHDR"),a+=4,w(P,a,s),a+=4,w(P,a,_),a+=4,P[a]=u.depth,a++,P[a]=u.ctype,a++,P[a]=0,a++,P[a]=0,a++,P[a]=0,a++,w(P,a,U(P,a-17,17)),a+=4,v.sRGB!=null&&(w(P,a,1),a+=4,d(P,a,"sRGB"),a+=4,P[a]=v.sRGB,a++,w(P,a,U(P,a-5,5)),a+=4),v.iCCP!=null){const K=13+k.length;w(P,a,K),a+=4,d(P,a,"iCCP"),a+=4,d(P,a,"ICC profile"),a+=11,a+=2,P.set(k,a),a+=k.length,w(P,a,U(P,a-(K+4),K+4)),a+=4}if(v.pHYs!=null&&(w(P,a,9),a+=4,d(P,a,"pHYs"),a+=4,w(P,a,v.pHYs[0]),a+=4,w(P,a,v.pHYs[1]),a+=4,P[a]=v.pHYs[2],a++,w(P,a,U(P,a-13,13)),a+=4),$&&(w(P,a,8),a+=4,d(P,a,"acTL"),a+=4,w(P,a,u.frames.length),a+=4,w(P,a,v.loop!=null?v.loop:0),a+=4,w(P,a,U(P,a-12,12)),a+=4),u.ctype==3){for(w(P,a,3*(H=u.plte.length)),a+=4,d(P,a,"PLTE"),a+=4,V=0;V<H;V++){const K=3*V,ee=u.plte[V],X=255&ee,re=ee>>>8&255,Oe=ee>>>16&255;P[a+K+0]=X,P[a+K+1]=re,P[a+K+2]=Oe}if(a+=3*H,w(P,a,U(P,a-3*H-4,3*H+4)),a+=4,L){for(w(P,a,H),a+=4,d(P,a,"tRNS"),a+=4,V=0;V<H;V++)P[a+V]=u.plte[V]>>>24&255;a+=H,w(P,a,U(P,a-H-4,H+4)),a+=4}}let te=0;for(N=0;N<u.frames.length;N++){var Z=u.frames[N];$&&(w(P,a,26),a+=4,d(P,a,"fcTL"),a+=4,w(P,a,te++),a+=4,w(P,a,Z.rect.width),a+=4,w(P,a,Z.rect.height),a+=4,w(P,a,Z.rect.x),a+=4,w(P,a,Z.rect.y),a+=4,T(P,a,y[N]),a+=2,T(P,a,1e3),a+=2,P[a]=Z.dispose,a++,P[a]=Z.blend,a++,w(P,a,U(P,a-30,30)),a+=4);const K=Z.cimg;w(P,a,(H=K.length)+(N==0?0:4)),a+=4;const ee=a;d(P,a,N==0?"IDAT":"fdAT"),a+=4,N!=0&&(w(P,a,te++),a+=4),P.set(K,a),a+=H,w(P,a,U(P,ee,a-ee)),a+=4}return w(P,a,0),a+=4,d(P,a,"IEND"),a+=4,w(P,a,U(P,a-4,4)),a+=4,P.buffer}function A(u,s,_){for(let y=0;y<u.frames.length;y++){const v=u.frames[y];v.rect.width;const U=v.rect.height,w=new Uint8Array(U*v.bpl+U);v.cimg=l(v.img,U,v.bpp,v.bpl,w,s,_)}}function o(u,s,_,y,v){const U=v[0],w=v[1],T=v[2],d=v[3],a=v[4],$=v[5];let k=6,L=8,G=255;for(var H=0;H<u.length;H++){const oe=new Uint8Array(u[H]);for(var V=oe.length,N=0;N<V;N+=4)G&=oe[N+3]}const P=G!=255,z=function(ve,fe,we,Ae,me,Me){const B=[];for(var W=0;W<ve.length;W++){const be=new Uint8Array(ve[W]),He=new Uint32Array(be.buffer);var Y;let _e=0,Pe=0,Ne=fe,Ge=we,tt=Ae?1:0;if(W!=0){const ze=Me||Ae||W==1||B[W-2].dispose!=0?1:2;let Qe=0,Ve=1e9;for(let Ce=0;Ce<ze;Ce++){var Le=new Uint8Array(ve[W-1-Ce]);const Ue=new Uint32Array(ve[W-1-Ce]);let Te=fe,Se=we,xe=-1,$e=-1;for(let ye=0;ye<we;ye++)for(let De=0;De<fe;De++)He[pe=ye*fe+De]!=Ue[pe]&&(De<Te&&(Te=De),De>xe&&(xe=De),ye<Se&&(Se=ye),ye>$e&&($e=ye));xe==-1&&(Te=Se=xe=$e=0),me&&((1&Te)==1&&Te--,(1&Se)==1&&Se--);const et=(xe-Te+1)*($e-Se+1);et<Ve&&(Ve=et,Qe=Ce,_e=Te,Pe=Se,Ne=xe-Te+1,Ge=$e-Se+1)}Le=new Uint8Array(ve[W-1-Qe]),Qe==1&&(B[W-1].dispose=2),Y=new Uint8Array(Ne*Ge*4),S(Le,fe,we,Y,Ne,Ge,-_e,-Pe,0),tt=S(be,fe,we,Y,Ne,Ge,-_e,-Pe,3)?1:0,tt==1?n(be,fe,we,Y,{x:_e,y:Pe,width:Ne,height:Ge}):S(be,fe,we,Y,Ne,Ge,-_e,-Pe,0)}else Y=be.slice(0);B.push({rect:{x:_e,y:Pe,width:Ne,height:Ge},img:Y,blend:tt,dispose:0})}if(Ae)for(W=0;W<B.length;W++){if((Be=B[W]).blend==1)continue;const be=Be.rect,He=B[W-1].rect,_e=Math.min(be.x,He.x),Pe=Math.min(be.y,He.y),Ne={x:_e,y:Pe,width:Math.max(be.x+be.width,He.x+He.width)-_e,height:Math.max(be.y+be.height,He.y+He.height)-Pe};B[W-1].dispose=1,W-1!=0&&r(ve,fe,we,B,W-1,Ne,me),r(ve,fe,we,B,W,Ne,me)}let Ye=0;if(ve.length!=1)for(var pe=0;pe<B.length;pe++){var Be;Ye+=(Be=B[pe]).rect.width*Be.rect.height}return B}(u,s,_,U,w,T),te={},Z=[],K=[];if(y!=0){const oe=[];for(N=0;N<z.length;N++)oe.push(z[N].img.buffer);const ve=function(me){let Me=0;for(var B=0;B<me.length;B++)Me+=me[B].byteLength;const W=new Uint8Array(Me);let Y=0;for(B=0;B<me.length;B++){const Le=new Uint8Array(me[B]),Ye=Le.length;for(let pe=0;pe<Ye;pe+=4){let Be=Le[pe],be=Le[pe+1],He=Le[pe+2];const _e=Le[pe+3];_e==0&&(Be=be=He=0),W[Y+pe]=Be,W[Y+pe+1]=be,W[Y+pe+2]=He,W[Y+pe+3]=_e}Y+=Ye}return W.buffer}(oe),fe=x(ve,y);for(N=0;N<fe.plte.length;N++)Z.push(fe.plte[N].est.rgba);let we=0;for(N=0;N<z.length;N++){const Ae=(X=z[N]).img.length;var ee=new Uint8Array(fe.inds.buffer,we>>2,Ae>>2);K.push(ee);const me=new Uint8Array(fe.abuf,we,Ae);$&&i(X.img,X.rect.width,X.rect.height,Z,me,ee),X.img.set(me),we+=Ae}}else for(H=0;H<z.length;H++){var X=z[H];const oe=new Uint32Array(X.img.buffer);var re=X.rect.width;for(V=oe.length,ee=new Uint8Array(V),K.push(ee),N=0;N<V;N++){const ve=oe[N];if(N!=0&&ve==oe[N-1])ee[N]=ee[N-1];else if(N>re&&ve==oe[N-re])ee[N]=ee[N-re];else{let fe=te[ve];if(fe==null&&(te[ve]=fe=Z.length,Z.push(ve),Z.length>=300))break;ee[N]=fe}}}const Oe=Z.length;for(Oe<=256&&a==0&&(L=Oe<=2?1:Oe<=4?2:Oe<=16?4:8,L=Math.max(L,d)),H=0;H<z.length;H++){(X=z[H]).rect.x,X.rect.y,re=X.rect.width;const oe=X.rect.height;let ve=X.img;new Uint32Array(ve.buffer);let fe=4*re,we=4;if(Oe<=256&&a==0){fe=Math.ceil(L*re/8);var ke=new Uint8Array(fe*oe);const Ae=K[H];for(let me=0;me<oe;me++){N=me*fe;const Me=me*re;if(L==8)for(var ie=0;ie<re;ie++)ke[N+ie]=Ae[Me+ie];else if(L==4)for(ie=0;ie<re;ie++)ke[N+(ie>>1)]|=Ae[Me+ie]<<4-4*(1&ie);else if(L==2)for(ie=0;ie<re;ie++)ke[N+(ie>>2)]|=Ae[Me+ie]<<6-2*(3&ie);else if(L==1)for(ie=0;ie<re;ie++)ke[N+(ie>>3)]|=Ae[Me+ie]<<7-1*(7&ie)}ve=ke,k=3,we=1}else if(P==0&&z.length==1){ke=new Uint8Array(re*oe*3);const Ae=re*oe;for(N=0;N<Ae;N++){const me=3*N,Me=4*N;ke[me]=ve[Me],ke[me+1]=ve[Me+1],ke[me+2]=ve[Me+2]}ve=ke,k=2,we=3,fe=3*re}X.img=ve,X.bpl=fe,X.bpp=we}return{ctype:k,depth:L,plte:Z,frames:z}}function r(u,s,_,y,v,U,w){const T=Uint8Array,d=Uint32Array,a=new T(u[v-1]),$=new d(u[v-1]),k=v+1<u.length?new T(u[v+1]):null,L=new T(u[v]),G=new d(L.buffer);let H=s,V=_,N=-1,P=-1;for(let te=0;te<U.height;te++)for(let Z=0;Z<U.width;Z++){const K=U.x+Z,ee=U.y+te,X=ee*s+K,re=G[X];re==0||y[v-1].dispose==0&&$[X]==re&&(k==null||k[4*X+3]!=0)||(K<H&&(H=K),K>N&&(N=K),ee<V&&(V=ee),ee>P&&(P=ee))}N==-1&&(H=V=N=P=0),w&&((1&H)==1&&H--,(1&V)==1&&V--),U={x:H,y:V,width:N-H+1,height:P-V+1};const z=y[v];z.rect=U,z.blend=1,z.img=new Uint8Array(U.width*U.height*4),y[v-1].dispose==0?(S(a,s,_,z.img,U.width,U.height,-U.x,-U.y,0),n(L,s,_,z.img,U)):S(L,s,_,z.img,U.width,U.height,-U.x,-U.y,0)}function n(u,s,_,y,v){S(u,s,_,y,v.width,v.height,-v.x,-v.y,2)}function l(u,s,_,y,v,U,w){const T=[];let d,a=[0,1,2,3,4];U!=-1?a=[U]:(s*y>5e5||_==1)&&(a=[0]),w&&(d={level:0});const $=qr;for(var k=0;k<a.length;k++){for(let H=0;H<s;H++)g(v,u,H,y,_,a[k]);T.push($.deflate(v,d))}let L,G=1e9;for(k=0;k<T.length;k++)T[k].length<G&&(L=k,G=T[k].length);return T[L]}function g(u,s,_,y,v,U){const w=_*y;let T=w+_;if(u[T]=U,T++,U==0)if(y<500)for(var d=0;d<y;d++)u[T+d]=s[w+d];else u.set(new Uint8Array(s.buffer,w,y),T);else if(U==1){for(d=0;d<v;d++)u[T+d]=s[w+d];for(d=v;d<y;d++)u[T+d]=s[w+d]-s[w+d-v]+256&255}else if(_==0){for(d=0;d<v;d++)u[T+d]=s[w+d];if(U==2)for(d=v;d<y;d++)u[T+d]=s[w+d];if(U==3)for(d=v;d<y;d++)u[T+d]=s[w+d]-(s[w+d-v]>>1)+256&255;if(U==4)for(d=v;d<y;d++)u[T+d]=s[w+d]-C(s[w+d-v],0,0)+256&255}else{if(U==2)for(d=0;d<y;d++)u[T+d]=s[w+d]+256-s[w+d-y]&255;if(U==3){for(d=0;d<v;d++)u[T+d]=s[w+d]+256-(s[w+d-y]>>1)&255;for(d=v;d<y;d++)u[T+d]=s[w+d]+256-(s[w+d-y]+s[w+d-v]>>1)&255}if(U==4){for(d=0;d<v;d++)u[T+d]=s[w+d]+256-C(0,s[w+d-y],0)&255;for(d=v;d<y;d++)u[T+d]=s[w+d]+256-C(s[w+d-v],s[w+d-y],s[w+d-v-y])&255}}}function x(u,s){const _=new Uint8Array(u),y=_.slice(0),v=new Uint32Array(y.buffer),U=E(y,s),w=U[0],T=U[1],d=_.length,a=new Uint8Array(d>>2);let $;if(_.length<2e7)for(var k=0;k<d;k+=4)$=p(w,L=_[k]*(1/255),G=_[k+1]*(1/255),H=_[k+2]*(1/255),V=_[k+3]*(1/255)),a[k>>2]=$.ind,v[k>>2]=$.est.rgba;else for(k=0;k<d;k+=4){var L=_[k]*.00392156862745098,G=_[k+1]*(1/255),H=_[k+2]*(1/255),V=_[k+3]*(1/255);for($=w;$.left;)$=O($.est,L,G,H,V)<=0?$.left:$.right;a[k>>2]=$.ind,v[k>>2]=$.est.rgba}return{abuf:y.buffer,inds:a,plte:T}}function E(u,s,_){_==null&&(_=1e-4);const y=new Uint32Array(u.buffer),v={i0:0,i1:u.length,bst:null,est:null,tdst:0,left:null,right:null};v.bst=R(u,v.i0,v.i1),v.est=b(v.bst);const U=[v];for(;U.length<s;){let T=0,d=0;for(var w=0;w<U.length;w++)U[w].est.L>T&&(T=U[w].est.L,d=w);if(T<_)break;const a=U[d],$=D(u,y,a.i0,a.i1,a.est.e,a.est.eMq255);if(a.i0>=$||a.i1<=$){a.est.L=0;continue}const k={i0:a.i0,i1:$,bst:null,est:null,tdst:0,left:null,right:null};k.bst=R(u,k.i0,k.i1),k.est=b(k.bst);const L={i0:$,i1:a.i1,bst:null,est:null,tdst:0,left:null,right:null};for(L.bst={R:[],m:[],N:a.bst.N-k.bst.N},w=0;w<16;w++)L.bst.R[w]=a.bst.R[w]-k.bst.R[w];for(w=0;w<4;w++)L.bst.m[w]=a.bst.m[w]-k.bst.m[w];L.est=b(L.bst),a.left=k,a.right=L,U[d]=k,U.push(L)}for(U.sort((T,d)=>d.bst.N-T.bst.N),w=0;w<U.length;w++)U[w].ind=w;return[v,U]}function p(u,s,_,y,v){if(u.left==null)return u.tdst=function(k,L,G,H,V){const N=L-k[0],P=G-k[1],z=H-k[2],te=V-k[3];return N*N+P*P+z*z+te*te}(u.est.q,s,_,y,v),u;const U=O(u.est,s,_,y,v);let w=u.left,T=u.right;U>0&&(w=u.right,T=u.left);const d=p(w,s,_,y,v);if(d.tdst<=U*U)return d;const a=p(T,s,_,y,v);return a.tdst<d.tdst?a:d}function O(u,s,_,y,v){const{e:U}=u;return U[0]*s+U[1]*_+U[2]*y+U[3]*v-u.eMq}function D(u,s,_,y,v,U){for(y-=4;_<y;){for(;M(u,_,v)<=U;)_+=4;for(;M(u,y,v)>U;)y-=4;if(_>=y)break;const w=s[_>>2];s[_>>2]=s[y>>2],s[y>>2]=w,_+=4,y-=4}for(;M(u,_,v)>U;)_-=4;return _+4}function M(u,s,_){return u[s]*_[0]+u[s+1]*_[1]+u[s+2]*_[2]+u[s+3]*_[3]}function R(u,s,_){const y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],v=[0,0,0,0],U=_-s>>2;for(let w=s;w<_;w+=4){const T=u[w]*.00392156862745098,d=u[w+1]*(1/255),a=u[w+2]*(1/255),$=u[w+3]*(1/255);v[0]+=T,v[1]+=d,v[2]+=a,v[3]+=$,y[0]+=T*T,y[1]+=T*d,y[2]+=T*a,y[3]+=T*$,y[5]+=d*d,y[6]+=d*a,y[7]+=d*$,y[10]+=a*a,y[11]+=a*$,y[15]+=$*$}return y[4]=y[1],y[8]=y[2],y[9]=y[6],y[12]=y[3],y[13]=y[7],y[14]=y[11],{R:y,m:v,N:U}}function b(u){const{R:s}=u,{m:_}=u,{N:y}=u,v=_[0],U=_[1],w=_[2],T=_[3],d=y==0?0:1/y,a=[s[0]-v*v*d,s[1]-v*U*d,s[2]-v*w*d,s[3]-v*T*d,s[4]-U*v*d,s[5]-U*U*d,s[6]-U*w*d,s[7]-U*T*d,s[8]-w*v*d,s[9]-w*U*d,s[10]-w*w*d,s[11]-w*T*d,s[12]-T*v*d,s[13]-T*U*d,s[14]-T*w*d,s[15]-T*T*d],$=a,k=F;let L=[Math.random(),Math.random(),Math.random(),Math.random()],G=0,H=0;if(y!=0)for(let N=0;N<16&&(L=k.multVec($,L),H=Math.sqrt(k.dot(L,L)),L=k.sml(1/H,L),!(N!=0&&Math.abs(H-G)<1e-9));N++)G=H;const V=[v*d,U*d,w*d,T*d];return{Cov:a,q:V,e:L,L:G,eMq255:k.dot(k.sml(255,V),L),eMq:k.dot(L,V),rgba:(Math.round(255*V[3])<<24|Math.round(255*V[2])<<16|Math.round(255*V[1])<<8|Math.round(255*V[0])<<0)>>>0}}var F={multVec:(u,s)=>[u[0]*s[0]+u[1]*s[1]+u[2]*s[2]+u[3]*s[3],u[4]*s[0]+u[5]*s[1]+u[6]*s[2]+u[7]*s[3],u[8]*s[0]+u[9]*s[1]+u[10]*s[2]+u[11]*s[3],u[12]*s[0]+u[13]*s[1]+u[14]*s[2]+u[15]*s[3]],dot:(u,s)=>u[0]*s[0]+u[1]*s[1]+u[2]*s[2]+u[3]*s[3],sml:(u,s)=>[u*s[0],u*s[1],u*s[2],u*s[3]]};je.encode=function(s,_,y,v,U,w,T){v==null&&(v=0),T==null&&(T=!1);const d=o(s,_,y,v,[!1,!1,!1,0,T,!1]);return A(d,-1),h(d,_,y,U,w)},je.encodeLL=function(s,_,y,v,U,w,T,d){const a={ctype:0+(v==1?0:2)+(U==0?0:4),depth:w,frames:[]},$=(v+U)*w,k=$*_;for(let L=0;L<s.length;L++)a.frames.push({rect:{x:0,y:0,width:_,height:y},img:new Uint8Array(s[L]),blend:0,dispose:1,bpp:Math.ceil($/8),bpl:Math.ceil(k/8)});return A(a,0,!0),h(a,_,y,T,d)},je.encode.compress=o,je.encode.dither=i,je.quantize=x,je.quantize.getKDtree=E,je.quantize.getNearest=p})();const Yt={toArrayBuffer(S,m){const C=S.width,c=S.height,e=C<<2,t=S.getContext("2d").getImageData(0,0,C,c),f=new Uint32Array(t.data.buffer),i=(32*C+31)/32<<2,h=i*c,A=122+h,o=new ArrayBuffer(A),r=new DataView(o),n=1<<20;let l,g,x,E,p=n,O=0,D=0,M=0;function R(u){r.setUint16(D,u,!0),D+=2}function b(u){r.setUint32(D,u,!0),D+=4}function F(u){D+=u}R(19778),b(A),F(4),b(122),b(108),b(C),b(-c>>>0),R(1),R(32),b(3),b(h),b(2835),b(2835),F(8),b(16711680),b(65280),b(255),b(4278190080),b(1466527264),function u(){for(;O<c&&p>0;){for(E=122+O*i,l=0;l<e;)p--,g=f[M++],x=g>>>24,r.setUint32(E+l,g<<8|x),l+=4;O++}M<f.length?(p=n,setTimeout(u,Yt._dly)):m(o)}()},toBlob(S,m){this.toArrayBuffer(S,C=>{m(new Blob([C],{type:"image/bmp"}))})},_dly:9};var Re={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},Kr={[Re.CHROME]:16384,[Re.FIREFOX]:11180,[Re.DESKTOP_SAFARI]:16384,[Re.IE]:8192,[Re.IOS]:4096,[Re.ETC]:8192};const Lt=typeof window<"u",Jt=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,At=Lt&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),Zr=(Lt||Jt)&&(At&&At.getOriginalSymbol(window,"File")||typeof File<"u"&&File),er=(Lt||Jt)&&(At&&At.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Ht(S,m,C=Date.now()){return new Promise(c=>{const e=S.split(","),t=e[0].match(/:(.*?);/)[1],f=globalThis.atob(e[1]);let i=f.length;const h=new Uint8Array(i);for(;i--;)h[i]=f.charCodeAt(i);const A=new Blob([h],{type:t});A.name=m,A.lastModified=C,c(A)})}function tr(S){return new Promise((m,C)=>{const c=new er;c.onload=()=>m(c.result),c.onerror=e=>C(e),c.readAsDataURL(S)})}function rr(S){return new Promise((m,C)=>{const c=new Image;c.onload=()=>m(c),c.onerror=e=>C(e),c.src=S})}function rt(){if(rt.cachedResult!==void 0)return rt.cachedResult;let S=Re.ETC;const{userAgent:m}=navigator;return/Chrom(e|ium)/i.test(m)?S=Re.CHROME:/iP(ad|od|hone)/i.test(m)&&/WebKit/i.test(m)?S=Re.IOS:/Safari/i.test(m)?S=Re.DESKTOP_SAFARI:/Firefox/i.test(m)?S=Re.FIREFOX:(/MSIE/i.test(m)||document.documentMode)&&(S=Re.IE),rt.cachedResult=S,rt.cachedResult}function nr(S,m){const C=rt(),c=Kr[C];let e=S,t=m,f=e*t;const i=e>t?t/e:e/t;for(;f>c*c;){const h=(c+e)/2,A=(c+t)/2;h<A?(t=A,e=A*i):(t=h*i,e=h),f=e*t}return{width:e,height:t}}function kt(S,m){let C,c;try{if(C=new OffscreenCanvas(S,m),c=C.getContext("2d"),c===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{C=document.createElement("canvas"),c=C.getContext("2d")}return C.width=S,C.height=m,[C,c]}function or(S,m){const{width:C,height:c}=nr(S.width,S.height),[e,t]=kt(C,c);return m&&/jpe?g/.test(m)&&(t.fillStyle="white",t.fillRect(0,0,e.width,e.height)),t.drawImage(S,0,0,e.width,e.height),e}function pt(){return pt.cachedResult!==void 0||(pt.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),pt.cachedResult}function Ct(S,m={}){return new Promise(function(C,c){let e,t;var f=function(){try{return t=or(e,m.fileType||S.type),C([e,t])}catch(h){return c(h)}},i=function(h){try{var A=function(o){try{throw o}catch(r){return c(r)}};try{let o;return tr(S).then(function(r){try{return o=r,rr(o).then(function(n){try{return e=n,function(){try{return f()}catch(l){return c(l)}}()}catch(l){return A(l)}},A)}catch(n){return A(n)}},A)}catch(o){A(o)}}catch(o){return c(o)}};try{if(pt()||[Re.DESKTOP_SAFARI,Re.MOBILE_SAFARI].includes(rt()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(S).then(function(h){try{return e=h,f()}catch{return i()}},i)}catch{i()}})}function Ut(S,m,C,c,e=1){return new Promise(function(t,f){let i;if(m==="image/png"){let A,o,r;return A=S.getContext("2d"),{data:o}=A.getImageData(0,0,S.width,S.height),r=je.encode([o.buffer],S.width,S.height,4096*e),i=new Blob([r],{type:m}),i.name=C,i.lastModified=c,h.call(this)}{let A=function(){return h.call(this)};if(m==="image/bmp")return new Promise(o=>Yt.toBlob(S,o)).then((function(o){try{return i=o,i.name=C,i.lastModified=c,A.call(this)}catch(r){return f(r)}}).bind(this),f);{let o=function(){return A.call(this)};if(typeof OffscreenCanvas=="function"&&S instanceof OffscreenCanvas)return S.convertToBlob({type:m,quality:e}).then((function(r){try{return i=r,i.name=C,i.lastModified=c,o.call(this)}catch(n){return f(n)}}).bind(this),f);{let r;return r=S.toDataURL(m,e),Ht(r,C,c).then((function(n){try{return i=n,o.call(this)}catch(l){return f(l)}}).bind(this),f)}}}function h(){return t(i)}})}function qe(S){S.width=0,S.height=0}function it(){return new Promise(function(S,m){let C,c,e,t;return it.cachedResult!==void 0?S(it.cachedResult):Ht("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(f){try{return C=f,Ct(C).then(function(i){try{return c=i[1],Ut(c,C.type,C.name,C.lastModified).then(function(h){try{return e=h,qe(c),Ct(e).then(function(A){try{return t=A[0],it.cachedResult=t.width===1&&t.height===2,S(it.cachedResult)}catch(o){return m(o)}},m)}catch(A){return m(A)}},m)}catch(h){return m(h)}},m)}catch(i){return m(i)}},m)})}function ar(S){return new Promise((m,C)=>{const c=new er;c.onload=e=>{const t=new DataView(e.target.result);if(t.getUint16(0,!1)!=65496)return m(-2);const f=t.byteLength;let i=2;for(;i<f;){if(t.getUint16(i+2,!1)<=8)return m(-1);const h=t.getUint16(i,!1);if(i+=2,h==65505){if(t.getUint32(i+=2,!1)!=1165519206)return m(-1);const A=t.getUint16(i+=6,!1)==18761;i+=t.getUint32(i+4,A);const o=t.getUint16(i,A);i+=2;for(let r=0;r<o;r++)if(t.getUint16(i+12*r,A)==274)return m(t.getUint16(i+12*r+8,A))}else{if((65280&h)!=65280)break;i+=t.getUint16(i,!1)}}return m(-1)},c.onerror=e=>C(e),c.readAsArrayBuffer(S)})}function ir(S,m){const{width:C}=S,{height:c}=S,{maxWidthOrHeight:e}=m;let t,f=S;return isFinite(e)&&(C>e||c>e)&&([f,t]=kt(C,c),C>c?(f.width=e,f.height=c/C*e):(f.width=C/c*e,f.height=e),t.drawImage(S,0,0,f.width,f.height),qe(S)),f}function sr(S,m){const{width:C}=S,{height:c}=S,[e,t]=kt(C,c);switch(m>4&&m<9?(e.width=c,e.height=C):(e.width=C,e.height=c),m){case 2:t.transform(-1,0,0,1,C,0);break;case 3:t.transform(-1,0,0,-1,C,c);break;case 4:t.transform(1,0,0,-1,0,c);break;case 5:t.transform(0,1,1,0,0,0);break;case 6:t.transform(0,1,-1,0,c,0);break;case 7:t.transform(0,-1,-1,0,c,C);break;case 8:t.transform(0,-1,1,0,0,C)}return t.drawImage(S,0,0,C,c),qe(S),e}function zt(S,m,C=0){return new Promise(function(c,e){let t,f,i,h,A,o,r,n,l,g,x,E,p,O,D,M,R,b,F,u;function s(y=5){if(m.signal&&m.signal.aborted)throw m.signal.reason;t+=y,m.onProgress(Math.min(t,100))}function _(y){if(m.signal&&m.signal.aborted)throw m.signal.reason;t=Math.min(Math.max(y,t),100),m.onProgress(t)}return t=C,f=m.maxIteration||10,i=1024*m.maxSizeMB*1024,s(),Ct(S,m).then((function(y){try{return[,h]=y,s(),A=ir(h,m),s(),new Promise(function(v,U){var w;if(!(w=m.exifOrientation))return ar(S).then((function(d){try{return w=d,T.call(this)}catch(a){return U(a)}}).bind(this),U);function T(){return v(w)}return T.call(this)}).then((function(v){try{return o=v,s(),it().then((function(U){try{return r=U?A:sr(A,o),s(),n=m.initialQuality||1,l=m.fileType||S.type,Ut(r,l,S.name,S.lastModified,n).then((function(w){try{{let d=function(){if(f--&&(D>i||D>p)){let $,k;return $=u?.95*F.width:F.width,k=u?.95*F.height:F.height,[R,b]=kt($,k),b.drawImage(F,0,0,$,k),n*=l==="image/png"?.85:.95,Ut(R,l,S.name,S.lastModified,n).then(function(L){try{return M=L,qe(F),F=R,D=M.size,_(Math.min(99,Math.floor((O-D)/(O-i)*100))),d}catch(G){return e(G)}},e)}return[1]},a=function(){return qe(F),qe(R),qe(A),qe(r),qe(h),_(100),c(M)};if(g=w,s(),x=g.size>i,E=g.size>S.size,!x&&!E)return _(100),c(g);var T;return p=S.size,O=g.size,D=O,F=r,u=!m.alwaysKeepResolution&&x,(T=(function($){for(;$;){if($.then)return void $.then(T,e);try{if($.pop){if($.length)return $.pop()?a.call(this):$;$=d}else $=$.call(this)}catch(k){return e(k)}}}).bind(this))(d)}}catch(d){return e(d)}}).bind(this),e)}catch(w){return e(w)}}).bind(this),e)}catch(U){return e(U)}}).bind(this),e)}catch(v){return e(v)}}).bind(this),e)})}const Xr=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Pt;function Yr(S,m){return new Promise((C,c)=>{Pt||(Pt=function(f){const i=[];return i.push(f),URL.createObjectURL(new Blob(i))}(Xr));const e=new Worker(Pt);e.addEventListener("message",function(f){if(m.signal&&m.signal.aborted)e.terminate();else if(f.data.progress===void 0){if(f.data.error)return c(new Error(f.data.error)),void e.terminate();C(f.data.file),e.terminate()}else m.onProgress(f.data.progress)}),e.addEventListener("error",c),m.signal&&m.signal.addEventListener("abort",()=>{c(m.signal.reason),e.terminate()}),e.postMessage({file:S,imageCompressionLibUrl:m.libURL,options:{...m,onProgress:void 0,signal:void 0}})})}function Ee(S,m){return new Promise(function(C,c){let e,t,f,i,h,A;if(e={...m},f=0,{onProgress:i}=e,e.maxSizeMB=e.maxSizeMB||Number.POSITIVE_INFINITY,h=typeof e.useWebWorker!="boolean"||e.useWebWorker,delete e.useWebWorker,e.onProgress=l=>{f=l,typeof i=="function"&&i(f)},!(S instanceof Blob||S instanceof Zr))return c(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(S.type))return c(new Error("The file given is not an image"));if(A=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!h||typeof Worker!="function"||A)return zt(S,e).then((function(l){try{return t=l,n.call(this)}catch(g){return c(g)}}).bind(this),c);var o=(function(){try{return n.call(this)}catch(l){return c(l)}}).bind(this),r=function(l){try{return zt(S,e).then(function(g){try{return t=g,o()}catch(x){return c(x)}},c)}catch(g){return c(g)}};try{return e.libURL=e.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",Yr(S,e).then(function(l){try{return t=l,o()}catch{return r()}},r)}catch{r()}function n(){try{t.name=S.name,t.lastModified=S.lastModified}catch{}try{e.preserveExif&&S.type==="image/jpeg"&&(!e.fileType||e.fileType&&e.fileType===S.type)&&(t=Xt(S,t))}catch{}return C(t)}})}Ee.getDataUrlFromFile=tr,Ee.getFilefromDataUrl=Ht,Ee.loadImage=rr,Ee.drawImageInCanvas=or,Ee.drawFileInCanvas=Ct,Ee.canvasToFile=Ut,Ee.getExifOrientation=ar,Ee.handleMaxWidthOrHeight=ir,Ee.followExifOrientation=sr,Ee.cleanupCanvasMemory=qe,Ee.isAutoOrientationInBrowser=it,Ee.approximateBelowMaximumCanvasSizeOfBrowser=nr,Ee.copyExifWithoutOrientation=Xt,Ee.getBrowserName=rt,Ee.version="2.0.2";function Jr(S,m,C){S.stopPropagation(),S.preventDefault(),q(m,void 0),C(C().image=void 0,!0)}var en=(S,m)=>{var C;return(C=I(m))==null?void 0:C.click()},tn=(S,m)=>{var C;return S.key==="Enter"&&((C=I(m))==null?void 0:C.click())},rn=()=>{},nn=ne('<div class="image-delete-button svelte-16gw6xs"><i class="material-icons  svelte-16gw6xs" role="button" tabindex="0">delete</i></div> <img alt="Bild" style="width: 120px; height: 80px; border-radius: 4px; object-fit: contain">',1),on=ne('<i class="material-icons">photo_camera</i>'),an=ne("<!> <!>",1),sn=ne('<div class="threshold svelte-16gw6xs"><div class="threshold-type svelte-16gw6xs"> </div> <div class="threshold-value svelte-16gw6xs"><!></div> <div class="threshold-strategy svelte-16gw6xs"><!></div> <div class="threshold-measures svelte-16gw6xs"><!></div> <div class="threshold-image svelte-16gw6xs" role="button" tabindex="0"><!></div> <input type="file" style="display: none"></div> <!>',1);function ln(S,m){Ze(m,!0);let C=se(m,"wearThreshold",15),c=he(null),e=he(ue(C().image)),t=he(null),f=he(null);async function i(s){var y;if(console.log("File selected",s),!s.target)return;const _=s.target;if(_.files&&_.files.length>0){const v=_.files[0];console.log("File",v);const U={maxWidthOrHeight:256,useWebWorker:!0};try{const w=await Ee(v,U);q(e,ue(await h(w))),C(C().image=I(e),!0),console.log("Selected image",I(e).length)}catch(w){w instanceof Error&&w.message==="The file given is not an image"&&((y=I(t))==null||y.forceOpen(),q(f,"Die hochgeladene Datei ist kein Bild!"))}}_.value=""}function h(s){return new Promise((_,y)=>{const v=new FileReader;v.readAsDataURL(s),v.onloadend=()=>_(v.result),v.onerror=y})}var A=sn(),o=le(A),r=ae(o),n=ae(r,!0);J(r);var l=Q(r,2),g=ae(l);Je(g,{label:"Grenzwert",get value(){return C().label},set value(s){C(C().label=s,!0)}}),J(l);var x=Q(l,2),E=ae(x);Fr(E,{style:"margin-top: 18px",label:"Strategie",get value(){return C().fixStrategy},set value(s){C(C().fixStrategy=s,!0)},children:(s,_)=>{var y=Ie(),v=le(y);nt(v,17,()=>m.strategies,ut,(U,w)=>{Pr(U,{get value(){return I(w).name},children:(T,d)=>{de();var a=ge();st(()=>_t(a,I(w).name)),j(T,a)},$$slots:{default:!0}})}),j(s,y)},$$slots:{default:!0}}),J(x);var p=Q(x,2),O=ae(p);Je(O,{textarea:!0,label:"Maßnahmen",input$rows:2,input$resizable:!0,get value(){return C().measures},set value(s){C(C().measures=s,!0)}}),J(p);var D=Q(p,2);D.__click=[en,c],D.__keydown=[tn,c];var M=ae(D);{var R=s=>{var _=nn(),y=le(_),v=ae(y);v.__click=[Jr,e,C],v.__keydown=[rn],J(y);var U=Q(y,2);st(()=>bt(U,"src",I(e))),j(s,_)},b=s=>{var _=on();j(s,_)};Fe(M,s=>{I(e)?s(R):s(b,!1)})}J(D);var F=Q(D,2);F.__change=i,ft(F,s=>q(c,s),()=>I(c)),J(o);var u=Q(o,2);ft(Dr(u,{class:"snackbar-error",children:(s,_)=>{var y=an(),v=le(y);$r(v,{children:(w,T)=>{de();var d=ge("Die hochgeladenen Datei ist kein Bild!");j(w,d)},$$slots:{default:!0}});var U=Q(v,2);Rr(U,{children:(w,T)=>{We(w,{class:"material-icons",title:"Dismiss",children:(d,a)=>{de();var $=ge("close");j(d,$)},$$slots:{default:!0}})},$$slots:{default:!0}}),j(s,y)},$$slots:{default:!0}}),s=>q(t,ue(s)),()=>I(t)),st(()=>_t(n,vr[C().type])),j(S,A),Xe()}xt(["click","keydown","change"]);var cn=ne('<i class="material-icons">delete</i>'),fn=ne('<div class="wear-criterion-form svelte-1keedjp"><div class="criterion svelte-1keedjp"><!> <!></div> <div class="thresholds svelte-1keedjp"></div></div>');function un(S,m){Ze(m,!0);let C=se(m,"wearCriterion",15);console.log("wearCriterion",C(),m.machineElement);let c=ce(()=>{var A,o;return((o=(A=m.machineElement)==null?void 0:A.criteria)==null?void 0:o.map(r=>r.name))??[]});var e=fn(),t=ae(e),f=ae(t);$t(f,{combobox:!0,label:"Kriterium",get options(){return I(c)},get value(){return C().label},set value(A){C(C().label=A,!0)}});var i=Q(f,2);We(i,{get onclick(){return m.ondelete},children:(A,o)=>{var r=cn();j(A,r)},$$slots:{default:!0}}),J(t);var h=Q(t,2);nt(h,21,()=>C().wearThresholds,ut,(A,o,r)=>{ln(A,{get strategies(){return m.strategies},get wearThreshold(){return C().wearThresholds[r]},set wearThreshold(n){C(C().wearThresholds[r]=n,!0)}})}),J(h),J(e),j(S,e),Xe()}var dn=ne('<span data-testid="dialog-title">Neue Komponente</span>'),vn=ne("<!> <span>Verschleißkriterium hinzufügen</span>",1),hn=ne('<!> <!> <!> <div class="wear-criterion-title svelte-1261838">Verschleißkriterien</div> <div class="wear-criteria svelte-1261838"></div> <!>',1),gn=ne('<!> <!> <div class="actions svelte-1261838"><!> <!></div>',1);function lr(S,m){Ze(m,!0);let C=se(m,"open",15),c=se(m,"assemblyComponent",19,()=>new Gt);console.log("assemblyComponent",c());let e=ue(c().wearCriteria);(!c().wearCriteria||c().wearCriteria.length===0)&&(console.log("add wear criterion"),l()),console.log("AssemblyComponent",c());let t=he(ue(c().name)),f=he(ue(c().machineElementCategory)),i=he(ue(c().machineElement)),h=he(!1),A=m.categoriesTreeView.map(p=>p.name),o=ce(()=>m.categoriesTreeView.find(p=>p.name===I(f))),r=ce(()=>I(o)?I(o).elements.map(p=>p.name):[]),n=ce(()=>I(o)?I(o).elements.find(p=>p.name===I(i)):null);function l(){const p=new hr;p.component=c(),p.wearThresholds=[new Mt({type:Tt.OpticalError,criterion:p}),new Mt({type:Tt.FunctionalError,criterion:p}),new Mt({type:Tt.SafetyError,criterion:p})],e.push(p)}function g(p){e.splice(p,1)}function x(){if(!I(t)||I(t).trim()===""){q(h,!0);return}const p=new Gt({...c(),name:I(t),machineElementCategory:I(f),machineElement:I(i),wearCriteria:e});m.onSave(p),C(!1)}function E(){q(t,""),C(!1)}Dt(S,{class:"custom-dialog",get open(){return C()},set open(p){C(p)},children:(p,O)=>{var D=gn(),M=le(D);Rt(M,{children:(s,_)=>{var y=dn();j(s,y)},$$slots:{default:!0}});var R=Q(M,2);Ot(R,{class:"content",children:(s,_)=>{var y=hn(),v=le(y);Je(v,{required:!0,get invalid(){return I(h)},style:"width: 100%;",onkeydown:a=>a.key==="Enter"&&x(),label:"Name",get value(){return I(t)},set value(a){q(t,ue(a))}});var U=Q(v,2);$t(U,{style:"margin-top: 12px",combobox:!0,options:A,label:"Kategorie Maschinenelement",get value(){return I(f)},set value(a){q(f,ue(a))}});var w=Q(U,2);$t(w,{style:"margin-top: 12px",combobox:!0,get options(){return I(r)},label:"Maschinenelement",get value(){return I(i)},set value(a){q(i,ue(a))}});var T=Q(w,4);nt(T,21,()=>e,ut,(a,$,k)=>{un(a,{get machineElement(){return I(n)},get strategies(){return m.strategies},ondelete:()=>g(k),get wearCriterion(){return e[k]},set wearCriterion(L){e[k]=L}})}),J(T);var d=Q(T,2);Ke(d,{id:"wear-criterion-add-button",onclick:l,children:(a,$)=>{var k=vn(),L=le(k);Zt(L,{class:"material-icons",children:(G,H)=>{de();var V=ge("add");j(G,V)},$$slots:{default:!0}}),de(2),j(a,k)},$$slots:{default:!0}}),j(s,y)},$$slots:{default:!0}});var b=Q(R,2),F=ae(b);Ke(F,{class:"cancel-button",onclick:()=>E(),children:(s,_)=>{de();var y=ge("Abbrechen");j(s,y)},$$slots:{default:!0}});var u=Q(F,2);Ke(u,{onclick:()=>x(),children:(s,_)=>{de();var y=ge("Speichern");j(s,y)},$$slots:{default:!0}}),J(b),j(p,D)},$$slots:{default:!0}}),Xe()}var mn=ne('<i class="material-icons">edit</i>'),pn=ne('<i class="material-icons">delete</i>'),bn=ne('<div class="component-name svelte-3p8an4"><!> <!> <!> <!> <!></div> <!>',1);function wn(S,m){Ze(m,!0);let C=se(m,"assemblyComponent",15),c=he(!1);function e(){q(c,!0)}var t=bn(),f=le(t),i=ae(f);Je(i,{variant:"filled",label:"Name",get value(){return C().name},set value(E){C(C().name=E,!0)}});var h=Q(i,2),A=ce(()=>!m.canMoveUp);We(h,{class:"material-icons",get disabled(){return I(A)},onclick:()=>m.onMoveUp(),children:(E,p)=>{de();var O=ge("keyboard_arrow_up");j(E,O)},$$slots:{default:!0}});var o=Q(h,2),r=ce(()=>!m.canMoveDown);We(o,{class:"material-icons",get disabled(){return I(r)},onclick:()=>m.onMoveDown(),children:(E,p)=>{de();var O=ge("keyboard_arrow_down");j(E,O)},$$slots:{default:!0}});var n=Q(o,2);We(n,{onclick:e,children:(E,p)=>{var O=mn();j(E,O)},$$slots:{default:!0}});var l=Q(n,2);We(l,{onclick:()=>m.onDeleteAssemblyComponent(),children:(E,p)=>{var O=pn();j(E,O)},$$slots:{default:!0}}),J(f);var g=Q(f,2);{var x=E=>{lr(E,{get strategies(){return m.strategies},get categoriesTreeView(){return m.categoriesTreeView},get assemblyComponent(){return C()},onSave:p=>{C(p),q(c,!1)},get open(){return I(c)},set open(p){q(c,ue(p))}})};Fe(g,E=>{I(c)&&E(x)})}j(S,t),Xe()}var _n=()=>{},yn=()=>{},An=ne('<div class="text-divider svelte-1ijejwk"></div> <div class="assembly-component-text svelte-1ijejwk" role="button" tabindex="0"><i class="material-icons">add</i> Komponente</div>',1),Cn=ne('<div class="assembly-group-structure-add-button svelte-1ijejwk"><div class="prefix-block svelte-1ijejwk"><div class="prefix-block-1 svelte-1ijejwk">&nbsp;</div> <div class="prefix-block-2 svelte-1ijejwk">&nbsp;</div></div> <div class="text-container svelte-1ijejwk"><div class="assembly-group-text svelte-1ijejwk" role="button" tabindex="0"><i class="material-icons">add</i> Baugruppe</div> <!></div></div>');function cr(S,m){let C=se(m,"onAddAssemblyGroup",8),c=se(m,"onAddAssemblyComponent",8,()=>{}),e=se(m,"showAddAssemblyComponent",8,!0);var t=Cn(),f=Q(ae(t),2),i=ae(f);i.__click=function(...o){var r;(r=C())==null||r.apply(this,o)},i.__keydown=[_n],wt(i,(o,r)=>{var n;return(n=jt)==null?void 0:n(o,r)},()=>({surface:!0}));var h=Q(i,2);{var A=o=>{var r=An(),n=Q(le(r),2);n.__click=[function(...l){var g;(g=c())==null||g.apply(this,l)}],n.__keydown=[yn],wt(n,(l,g)=>{var x;return(x=jt)==null?void 0:x(l,g)},()=>({surface:!0})),j(o,r)};Fe(h,o=>{e()&&o(A)})}J(f),J(t),j(S,t)}xt(["click","keydown"]);var Un=ne('<span data-testid="dialog-title">Neue Baugruppe</span>'),xn=ne('<!> <!> <div class="actions svelte-xq993"><!> <!></div>',1);function fr(S,m){Ze(m,!0);let C=se(m,"open",15),c=he(""),e=he(!1);function t(){if(!I(c)||I(c).trim()===""){q(e,!0);return}const i=new gr;i.name=I(c),m.onSave(i),q(c,""),C(!1)}function f(){q(c,""),C(!1)}Dt(S,{get open(){return C()},set open(i){C(i)},children:(i,h)=>{var A=xn(),o=le(A);Rt(o,{children:(x,E)=>{var p=Un();j(x,p)},$$slots:{default:!0}});var r=Q(o,2);Ot(r,{children:(x,E)=>{Je(x,{required:!0,get invalid(){return I(e)},style:"width: 100%;",onkeydown:p=>p.key==="Enter"&&t(),label:"Name",get value(){return I(c)},set value(p){q(c,ue(p))}})},$$slots:{default:!0}});var n=Q(r,2),l=ae(n);Ke(l,{class:"cancel-button",onclick:()=>f(),children:(x,E)=>{de();var p=ge("Abbrechen");j(x,p)},$$slots:{default:!0}});var g=Q(l,2);Ke(g,{onclick:()=>t(),children:(x,E)=>{de();var p=ge("Speichern");j(x,p)},$$slots:{default:!0}}),J(n),j(i,A)},$$slots:{default:!0}}),Xe()}var kn=ne('<i class="material-icons">delete</i>'),En=(S,m)=>S.key==="Enter"&&q(m,!I(m)),Mn=(S,m)=>q(m,!I(m)),Tn=ne('<div class="children-groups-container svelte-i93m5w"><div class="vertical-border svelte-i93m5w">&nbsp;</div> <div class="children-groups svelte-i93m5w"></div></div>'),Sn=ne("<!> <!> <!> <!>",1),In=ne('<div class="group-form svelte-i93m5w"><div class="group-form-prefix-borders svelte-i93m5w"><div class="group-form-prefix-borders-1 svelte-i93m5w">&nbsp;</div> <div class="group-form-prefix-borders-2 svelte-i93m5w">&nbsp;</div></div> <div class="group-form-content svelte-i93m5w"><div class="assembly-header svelte-i93m5w"><!> <!> <!> <!></div> <div><div class="expand-button svelte-i93m5w" role="button" tabindex="0"> </div></div> <!></div></div>');function ur(S,m){Ze(m,!0);let C=se(m,"assemblyGroup",15),c=ue(C().name),e=ue(C().children),t=he(!0),f=he(!1),i=he(!1);function h(v){v.parent=C(),e.push(v),console.log(e)}function A(v){const U=e.findIndex(w=>w.id===v.id);U!==-1&&(e[U]=v)}function o(v){v.parent=C(),e.push(v),console.log(e)}function r(v){e.splice(v,1)}function n(v){if(v===0)return;const U=e[v];e[v]=e[v-1],e[v-1]=U}function l(v){if(v===e.length-1)return;const U=e[v];e[v]=e[v+1],e[v+1]=U}ct(()=>{C(C().children=e,!0),C(C().name=c,!0),console.log("effect",C())});var g=In(),x=Q(ae(g),2),E=ae(x),p=ae(E);Je(p,{variant:"filled",label:"Name",get value(){return C().name},set value(v){C(C().name=v,!0)}});var O=Q(p,2),D=ce(()=>!m.canMoveUp);We(O,{class:"material-icons",get disabled(){return I(D)},onclick:()=>m.onMoveUp(),children:(v,U)=>{de();var w=ge("keyboard_arrow_up");j(v,w)},$$slots:{default:!0}});var M=Q(O,2),R=ce(()=>!m.canMoveDown);We(M,{class:"material-icons",get disabled(){return I(R)},onclick:()=>m.onMoveDown(),children:(v,U)=>{de();var w=ge("keyboard_arrow_down");j(v,w)},$$slots:{default:!0}});var b=Q(M,2);We(b,{onclick:()=>m.onDeleteAssemblyGroup(),children:(v,U)=>{var w=kn();j(v,w)},$$slots:{default:!0}}),J(E);var F=Q(E,2),u=ae(F);u.__keydown=[En,t],u.__click=[Mn,t];var s=ae(u,!0);J(u),J(F);var _=Q(F,2);{var y=v=>{var U=Sn(),w=le(U);{var T=G=>{var H=Tn(),V=Q(ae(H),2);nt(V,23,()=>e,N=>N.id,(N,P,z)=>{var te=Ie(),Z=le(te);{var K=X=>{var re=ce(()=>m.level+1),Oe=ce(()=>I(z)===e.length-1),ke=ce(()=>I(z)>0),ie=ce(()=>I(z)!==e.length-1);wn(X,{get strategies(){return m.strategies},get level(){return I(re)},get lastChild(){return I(Oe)},get canMoveUp(){return I(ke)},get canMoveDown(){return I(ie)},onMoveUp:()=>n(I(z)),onMoveDown:()=>l(I(z)),get categoriesTreeView(){return m.categoriesTreeView},onDeleteAssemblyComponent:()=>r(I(z)),onUpdateComponent:A,get assemblyComponent(){return e[I(z)]},set assemblyComponent(oe){e[I(z)]=oe}})},ee=X=>{var re=ce(()=>m.level+1),Oe=ce(()=>I(z)!==e.length-1),ke=ce(()=>I(z)>0),ie=ce(()=>I(z)===e.length-1);ur(X,{get level(){return I(re)},get strategies(){return m.strategies},get lastChild(){return I(Oe)},get canMoveUp(){return I(ke)},get canMoveDown(){return I(ie)},onMoveUp:()=>n(I(z)),onMoveDown:()=>l(I(z)),get categoriesTreeView(){return m.categoriesTreeView},onDeleteAssemblyGroup:()=>r(I(z)),get assemblyGroup(){return e[I(z)]},set assemblyGroup(oe){e[I(z)]=oe}})};Fe(Z,X=>{I(P).type==="assembly-component"?X(K):X(ee,!1)})}j(N,te)}),J(V),J(H),j(G,H)};Fe(w,G=>{e&&e.length>0&&G(T)})}var d=Q(w,2);cr(d,{onAddAssemblyGroup:()=>q(f,!0),onAddAssemblyComponent:()=>q(i,!0),showAddAssemblyComponent:!0});var a=Q(d,2);{var $=G=>{fr(G,{onSave:H=>h(H),get open(){return I(f)},set open(H){q(f,ue(H))}})};Fe(a,G=>{I(f)&&G($)})}var k=Q(a,2);{var L=G=>{lr(G,{get strategies(){return m.strategies},get categoriesTreeView(){return m.categoriesTreeView},onSave:H=>o(H),get open(){return I(i)},set open(H){q(i,ue(H))}})};Fe(k,G=>{I(i)&&G(L)})}j(v,U)};Fe(_,v=>{I(t)&&v(y)})}J(x),J(g),st(()=>{bt(g,"style",`margin-bottom: ${(m.lastChild?"0":"16px")??""}`),_t(s,I(t)?"▼":"►")}),j(S,g),Xe()}xt(["keydown","click"]);var Fn=ne('<div style="display: flex; margin-top: 12px;"><!> <!> <!> <!></div>'),Pn=ne("<!> Strategie hinzufügen",1),$n=ne('<!> <div style="display: flex; margin-top: 12px;"><!></div>',1);function Dn(S,m){Ze(m,!0);let C=se(m,"strategies",15);function c(){C().push({id:lt(),name:"",priority:C().length+1,product:m.product})}function e(r){C().splice(r,1)}function t(r){if(r===0)return;const n=C()[r];n.priority=n.priority-1,C(C()[r]=C()[r-1],!0),C(C()[r-1]=n,!0),C(C()[r].priority=C()[r].priority+1,!0)}function f(r){if(r===C().length-1)return;const n=C()[r];n.priority=n.priority+1,C(C()[r]=C()[r+1],!0),C(C()[r+1]=n,!0),C(C()[r].priority=C()[r].priority-1,!0)}var i=$n(),h=le(i);nt(h,17,C,ut,(r,n,l)=>{var g=Fn(),x=ae(g);We(x,{class:"material-icons",disabled:l===0,onclick:()=>t(l),children:(M,R)=>{de();var b=ge("keyboard_arrow_up");j(M,b)},$$slots:{default:!0}});var E=Q(x,2),p=ce(()=>l===C().length-1);We(E,{class:"material-icons",get disabled(){return I(p)},onclick:()=>f(l),children:(M,R)=>{de();var b=ge("keyboard_arrow_down");j(M,b)},$$slots:{default:!0}});var O=Q(E,2);Je(O,{style:"width: 200px",label:"Name",get value(){return C()[l].name},set value(M){C(C()[l].name=M,!0)}});var D=Q(O,2);We(D,{class:"material-icons",onclick:()=>e(l),children:(M,R)=>{de();var b=ge("delete");j(M,b)},$$slots:{default:!0}}),J(g),j(r,g)});var A=Q(h,2),o=ae(A);Ke(o,{onclick:c,children:(r,n)=>{var l=Pn(),g=le(l);Zt(g,{class:"material-icons",children:(x,E)=>{de();var p=ge("add");j(x,p)},$$slots:{default:!0}}),de(),j(r,l)},$$slots:{default:!0}}),J(A),j(S,i),Xe()}var Rn=ne('<i class="material-icons">arrow_back</i> <span>Zurück</span>',1),On=ne('<i class="material-icons">save</i> <span>Speichern</span>',1),Ln=ne("<p>Möchten Sie die Änderungen vor dem Verlassen speichern oder verwerfen?</p>"),Hn=ne("<!> <!>",1),Nn=ne("<!> <!> <!>",1),Bn=ne('<section class="product-form svelte-i1r9uc"><div class="product-form-header svelte-i1r9uc"><!> <h1 class="svelte-i1r9uc">Produkt hinzufügen</h1> <!></div> <div class="product-form-content svelte-i1r9uc"><div class="name-field svelte-i1r9uc"><!></div> <h3>Baugruppenstruktur</h3> <div class="assembly-group-structure svelte-i1r9uc"><div class="children-groups-container svelte-i1r9uc"><div class="vertical-border svelte-i1r9uc">&nbsp;</div> <div class="children-groups svelte-i1r9uc"></div></div> <!></div> <!> <h3 style="margin-top: 32px">Fix Strategien</h3> <!></div> <!></section>');function io(S,m){Ze(m,!0),xr.Instance.setTitle("Konfiguration");let{id:C,productTreeView:c,categoriesTreeView:e,...t}=m.data,f=!0,i=he(!1);console.log("props",C,c,e,t);let h=ue(C?c:new Qt),A=he(!1),o=he(ue(c.fixStrategies.sort((a,$)=>a.priority-$.priority)??[])),r=ue(h.assemblyGroups);function n(a){a.parent=h,r.push(a),console.log(h)}function l(a){r.splice(a,1)}function g(a){if(a===0)return;const $=r[a];r[a]=r[a-1],r[a-1]=$}function x(a){if(a===r.length-1)return;const $=r[a];r[a]=r[a+1],r[a+1]=$}function E(){h.assemblyGroups=r,h.fixStrategies=I(o),h.createdAt=h.createdAt??new Date;const a=mr(h);console.log("elements",a),fetch("/api/product/"+C+"?asTreeView=true",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),f=!1,St("/configuration")}function p(){St("/configuration")}function O(){f=!1,St("/configuration")}br(a=>{f&&(a.cancel(),q(i,!0))});var D=Bn(),M=ae(D),R=ae(M);Ke(R,{class:"default-button",onclick:()=>p(),children:(a,$)=>{var k=Rn();de(2),j(a,k)},$$slots:{default:!0}});var b=Q(R,4);Ke(b,{onclick:E,children:(a,$)=>{var k=On();de(2),j(a,k)},$$slots:{default:!0}}),J(M);var F=Q(M,2),u=ae(F),s=ae(u);Je(s,{variant:"filled",label:"Produktname",get value(){return h.name},set value(a){h.name=a}}),J(u);var _=Q(u,4),y=ae(_),v=Q(ae(y),2);nt(v,23,()=>r,a=>a.id,(a,$,k)=>{var L=ce(()=>I(k)>0),G=ce(()=>I(k)!==r.length-1),H=ce(()=>I(k)===r.length-1);ur(a,{get strategies(){return I(o)},level:1,get canMoveUp(){return I(L)},get canMoveDown(){return I(G)},onMoveUp:()=>g(I(k)),onMoveDown:()=>x(I(k)),get lastChild(){return I(H)},categoriesTreeView:e,onDeleteAssemblyGroup:()=>l(I(k)),get assemblyGroup(){return r[I(k)]},set assemblyGroup(V){r[I(k)]=V}})}),J(v),J(y);var U=Q(y,2);cr(U,{onAddAssemblyGroup:()=>q(A,!0),showAddAssemblyComponent:!1}),J(_);var w=Q(_,2);fr(w,{onSave:a=>n(a),get open(){return I(A)},set open(a){q(A,ue(a))}});var T=Q(w,4);Dn(T,{product:c,get strategies(){return I(o)},set strategies(a){q(o,ue(a))}}),J(F);var d=Q(F,2);Dt(d,{class:"dialog",get open(){return I(i)},set open(a){q(i,ue(a))},children:(a,$)=>{var k=Nn(),L=le(k);Rt(L,{children:(V,N)=>{de();var P=ge("Änderungen speichern");j(V,P)},$$slots:{default:!0}});var G=Q(L,2);Ot(G,{children:(V,N)=>{var P=Ln();j(V,P)},$$slots:{default:!0}});var H=Q(G,2);kr(H,{children:(V,N)=>{var P=Hn(),z=le(P);Ke(z,{onclick:O,children:(Z,K)=>{de();var ee=ge("Verwerfen");j(Z,ee)},$$slots:{default:!0}});var te=Q(z,2);Ke(te,{onclick:E,children:(Z,K)=>{de();var ee=ge("Speichern");j(Z,ee)},$$slots:{default:!0}}),j(V,P)},$$slots:{default:!0}}),j(a,k)},$$slots:{default:!0}}),J(D),j(S,D),Xe()}export{io as component,ao as universal};
