var f=Object.defineProperty;var y=(r,e,n)=>e in r?f(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n;var t=(r,e,n)=>y(r,typeof e!="symbol"?e+"":e,n);import{v as i}from"./C6aID195.js";class b{constructor(e={}){t(this,"id",i());t(this,"productId");t(this,"name","");t(this,"assemblyGroupId");t(this,"machineElementCategory","");t(this,"machineElement","");Object.assign(this,e)}}class g{constructor(e={}){t(this,"id",i());t(this,"type","assembly-component");t(this,"parent");t(this,"wearCriteria",[]);t(this,"name","");t(this,"machineElementCategory","");t(this,"machineElement","");Object.assign(this,e)}}class w{constructor(e={}){t(this,"id",i());t(this,"name","");t(this,"productId");t(this,"parentId");Object.assign(this,e)}}class u{constructor(e={}){t(this,"id",i());t(this,"type","assembly-group");t(this,"name","");t(this,"parent");t(this,"children",[]);Object.assign(this,e)}}class T{constructor(e={}){t(this,"id",i());t(this,"name","");t(this,"createdAt",Date.now());Object.assign(this,e)}static fromDatabaseModel(e){return e?{id:e.id,name:e.name,createdAt:e.createdAt}:null}static toDatabaseModel(e){return{id:e.id,name:e.name,createdAt:e.createdAt}}}class p{constructor(e={}){t(this,"id",i());t(this,"name","");t(this,"assemblyGroups",[]);t(this,"fixStrategies",[]);t(this,"createdAt",Date.now());Object.assign(this,e)}}class E{constructor(e={}){t(this,"id",i());t(this,"productId");t(this,"priority",0);t(this,"name","");Object.assign(this,e)}}class C{constructor(e={}){t(this,"id",i());t(this,"product");t(this,"priority",0);t(this,"name","");Object.assign(this,e)}}class I{constructor(e={}){t(this,"id",i());t(this,"componentId");t(this,"productId");t(this,"label","");Object.assign(this,e)}}class A{constructor(e={}){t(this,"id",i());t(this,"type","wear-criterion");t(this,"label","");t(this,"component");t(this,"wearThresholds",[]);Object.assign(this,e)}}class O{constructor(e={}){t(this,"id",i());t(this,"productId");t(this,"criterionId");t(this,"label","");t(this,"type","OpticalError");t(this,"fixStrategy","");t(this,"measures","");t(this,"image");Object.assign(this,e)}}class S{constructor(e={}){t(this,"id",i());t(this,"label","");t(this,"criterion");t(this,"type","OpticalError");t(this,"fixStrategy","");t(this,"measures","");t(this,"image");Object.assign(this,e)}}var G=(r=>(r.OpticalError="OpticalError",r.FunctionalError="FunctionalError",r.SafetyError="SafetyError",r))(G||{});const v={OpticalError:"Optischer Fehler",FunctionalError:"Funktionaler Fehler",SafetyError:"Sicherheitskritischer Fehler"};function q(r){const e=new p;e.id=r.product.id,e.name=r.product.name,e.createdAt=r.product.createdAt,e.fixStrategies=r.strategies.map(o=>new C({id:o.id,name:o.name,priority:o.priority,product:e}));const n=r.groups.filter(o=>!o.parentId);for(const o of n){const s=m(r,e,o);e.assemblyGroups.push(s)}return e}function l(r){const e=[];if(r instanceof p){for(const n of r.assemblyGroups)e.push(...l(n));return e}else{for(const n of r.children)n.type==="assembly-component"?e.push(n):e.push(...l(n));return e}}function z(r){const e={product:new T({id:r.id,name:r.name,createdAt:r.createdAt}),groups:[],components:[],wearCriteria:[],wearThresholds:[],strategies:P(r)};for(const n of r.assemblyGroups)h(e,n);return e}function m(r,e,n){const o=new u;o.id=n.id,o.name=n.name,o.parent=e;const s=r.groups.filter(a=>a.parentId===n.id),c=r.components.filter(a=>a.assemblyGroupId===n.id);for(const a of s){const d=m(r,o,a);o.children.push(d)}for(const a of c){const d=F(r,o,a);o.children.push(d)}return o}function F(r,e,n){const o=new g;o.id=n.id,o.name=n.name,o.machineElementCategory=n.machineElementCategory,o.machineElement=n.machineElement,o.parent=e;const s=r.wearCriteria.filter(c=>c.componentId===n.id);for(const c of s){const a=j(r,o,c);o.wearCriteria.push(a)}return o}function j(r,e,n){const o=new A;o.id=n.id,o.label=n.label,o.component=e;const s=r.wearThresholds.filter(c=>c.criterionId===n.id);for(const c of s){const a=x(r,o,c);o.wearThresholds.push(a)}return o}function x(r,e,n){const o=new S;return o.id=n.id,o.label=n.label,o.type=n.type,o.fixStrategy=n.fixStrategy,o.measures=n.measures,o.criterion=e,o.image=n.image,o}function h(r,e){var o;const n=new w({id:e.id,name:e.name,productId:r.product.id,parentId:e.parent instanceof u?(o=e.parent)==null?void 0:o.id:void 0});r.groups.push(n);for(const s of e.children)s.type==="assembly-group"?h(r,s):V(r,s)}function V(r,e){const n=new b({id:e.id,name:e.name,assemblyGroupId:e.parent.id,productId:r.product.id,machineElementCategory:e.machineElementCategory,machineElement:e.machineElement});r.components.push(n);for(const o of e.wearCriteria)M(r,o)}function M(r,e){const n=new I({id:e.id,productId:r.product.id,componentId:e.component.id,label:e.label});console.log("Store WearCriterion",n),r.wearCriteria.push(n);for(const o of e.wearThresholds)W(r,o)}function W(r,e){const n=new O({id:e.id,productId:r.product.id,criterionId:e.criterion.id,label:e.label,type:e.type,fixStrategy:e.fixStrategy,measures:e.measures,image:e.image});r.wearThresholds.push(n)}function P(r){return r.fixStrategies.map(e=>new E({id:e.id,name:e.name,priority:e.priority,productId:r.id}))}export{u as A,p as P,C as T,A as W,g as a,S as b,G as c,z as d,q as e,v as f,l as g};
